var t=0;function a(a){return"__private_"+t+++"_"+a}function e(t,a){if(!Object.prototype.hasOwnProperty.call(t,a))throw new TypeError("attempted to use private field on non-instance");return t}const i=180/Math.PI,s=function(t){return t/i};var r=a("x"),h=a("y");class n{constructor(...t){Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),e(this,r)[r]=0,e(this,h)[h]=0,this.reset(...t)}reset(...t){let[a,e]=t;return isNaN(a)&&(a=0),isNaN(e)&&(e=0),this.x=a,this.y=e,this}resetToVector(t){return this.x=t.x,this.y=t.y,this}clone(){return new n(this.x,this.y)}add(t){return this.x+=t.x,this.y+=t.y,this}addNew(t){return this.clone().add(t)}addScalar(t){return this.add(new n(t,t))}addScalarNew(t){return this.clone().addScalar(t)}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractNew(t){return this.clone().subtract(t)}subtractScalar(t){return this.subtract(new n(t,t))}subtractScalarNew(t){return this.clone().subtractScalar(t)}divide(t){return 0!==t.x?this.x/=t.x:this.x=0,0!==t.y?this.y/=t.y:this.y=0,this}divideNew(t){return this.clone().divide(t)}divideScalar(t){var a=new n(t,t);return this.divide(a)}divideScalarNew(t){return this.clone().divideScalar(t)}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyNew(t){return this.clone().multiply(t)}multiplyScalar(t){var a=new n(t,t);return this.multiply(a)}multiplyScalarNew(t){return this.clone().multiplyScalar(t)}scale(t){return this.multiplyScalar(t)}scaleNew(t){return this.multiplyScalarNew(t)}rotate(t){var a=this.x*Math.cos(t)-this.y*Math.sin(t),e=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=a,this.y=e,this}rotateNew(t){return this.clone().rotate(t)}rotateDeg(t){return this.rotate(s(t))}rotateDegNew(t){return this.rotateNew(s(t))}rotateBy(t){return this.rotate(t)}rotateByNew(t){return this.rotateNew(t)}rotateDegBy(t){return this.rotateDeg(t)}rotateDegByNew(t){return this.rotateDegNew(t)}rotateTo(t){return this.rotate(t-this.angle)}rotateToNew(t){return this.clone().rotateTo(t)}rotateToDeg(t){return this.rotateTo(s(t))}rotateToDegNew(t){return this.rotateToNew(s(t))}negate(){return this.multiplyScalar(-1)}negateNew(){return this.multiplyScalarNew(-1)}inverse(){return this.x=1/this.x,this.y=1/this.y,this}inverseNew(){const t=this.clone();return t.x=1/t.x,t.y=1/t.y,t}normalise(){return this.divideScalar(this.length)}normaliseNew(){return this.divideScalarNew(this.length)}distance(t){return this.subtractNew(t).length}distanceX(t){return this.x-t.x}distanceY(t){return this.y-t.y}dot(t){return this.x*t.x+this.y*t.y}det(t){return this.x*t.y+this.y*t.x}slopeBetween(t){return(t.y-this.y)/(t.x-this.x)}cross(t){return this.x*t.x-this.y*t.y}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}ceilNew(){return this.clone().ceil()}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}floorNew(){return this.clone().floor()}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundNew(){return this.clone().round()}mod(t){return this.x=this.x%t.x,this.y=this.y%t.y,this}modNew(t){return this.clone().mod(t)}fract(){return this.x-=Math.floor(this.x),this.y-=Math.floor(this.y),this}fractNew(){return this.clone().fract()}transformByMat2(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=4){const a=this.clone();this.x=t[0]*a.x+t[2]*a.y,this.y=t[1]*a.x+t[3]*a.y}return this}transformByMat2New(t){return this.clone().transformByMat2(t)}transformByMat3(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=9){const a=this.clone();this.x=t[0]*a.x+t[3]*a.y+t[6],this.y=t[1]*a.x+t[4]*a.y+t[7]}return this}transformByMat3New(t){return this.clone().transformByMat3(t)}set x(t){if("number"!=typeof t)throw new TypeError("X should be a number");e(this,r)[r]=t}get x(){return e(this,r)[r]||0}set y(t){if("number"!=typeof t)throw new TypeError("Y should be a number");e(this,h)[h]=t}get y(){return e(this,h)[h]||0}set lengthSquared(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y}set length(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.length)}get length(){return Math.sqrt(this.lengthSquared)}set angle(t){if("number"!=typeof t)throw new TypeError("angle should be a number");this.rotateTo(t)}get angle(){return Math.atan2(this.y,this.x)}set angleInDegrees(t){if("number"!=typeof t)throw new TypeError("angle should be a number");this.rotateToDeg(t)}get angleInDegrees(){return Math.atan2(this.y,this.x)*i}set width(t){this.x=t}get width(){return this.x}set height(t){this.y=t}get height(){return this.y}get area(){return this.x*this.y}set slope(t){if(!isNaN(t)){let a=Math.atan(t);this.angle=a}}get slope(){return this.y/this.x}get array(){return[this.x,this.y]}get xy(){return new n(this.x,this.y)}set xy(t){if(t instanceof n)this.resetToVector(t);else{if(!(t instanceof Array&&t.length>=2))throw new Error("input should be of type Vector");this.reset(t[0],t[1])}}get yx(){return new n(this.y,this.x)}set yx(t){this.xy=n.interpolate(t).yx}get xx(){return new n(this.x,this.x)}set xx(t){t=n.interpolate(t),this.x=t.y}get yy(){return new n(this.y,this.y)}set yy(t){t=n.interpolate(t),this.y=t.y}static interpolate(t){if(t instanceof n)return new n(t.x,t.y);if(t instanceof Array&&t.length>=2)return new n(t[0],t[1]);if(!isNaN(t))return new n(t,t);if("string"!=typeof t)throw new Error("The passed interpolant could not be parsed into a vec2");{const a=t.split(","),e=Number(a[0]),i=Number(a[1]);if(a.length>=2&&!isNaN(e)&&!isNaN(i))return new n(e,i)}}static lerp(t,a,e){return new n(t.x+e*(a.x-t.x),t.y+e*(a.y-t.y))}static getAngle(t,a){t=t.clone(),a=a.clone(),t.normalise(),a.normalise();const e=t.dot(a);return e>1?0:e<-1?Math.PI:Math.acos(e)}}var o=a("x"),u=a("y"),y=a("z");class l{constructor(...t){Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),e(this,o)[o]=0,e(this,u)[u]=0,e(this,y)[y]=0,this.reset(...t)}reset(...t){let[a,e,i,s]=t;return isNaN(a)&&(a=0),isNaN(e)&&(e=0),isNaN(i)&&(i=0),this.x=a,this.y=e,this.z=i,this}resetToVector(t){return t instanceof l&&(this.x=t.x,this.y=t.y,this.z=t.z),this}clone(){return new l(this.x,this.y,this.z)}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addNew(t){return this.clone().add(t)}addScalar(t){return this.add(new l(t,t,t))}addScalarNew(t){return this.clone().addScalar(t)}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subtractNew(t){return this.clone().subtract(t)}subtractScalar(t){return this.subtract(new l(t,t,t))}subtractScalarNew(t){return this.clone().subtractScalar(t)}divide(t){return 0!==t.x?this.x/=t.x:this.x=0,0!==t.y?this.y/=t.y:this.y=0,0!==t.z?this.z/=t.z:this.z=0,this}divideNew(t){return this.clone().divide(t)}divideScalar(t){var a=new l(t,t,t);return this.divide(a)}divideScalarNew(t){return this.clone().divideScalar(t)}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyNew(t){return this.clone().multiply(t)}multiplyScalar(t){var a=new l(t,t,t);return this.multiply(a)}multiplyScalarNew(t){return this.clone().multiplyScalar(t)}scale(t){return this.multiplyScalar(t)}scaleNew(t){return this.multiplyScalarNew(t)}rotateX(t,a){const e=Math.sin(a),i=Math.cos(a),s=this.subtractNew(t).clone();return s.y=s.y*i-s.z*e,s.z=s.y*e+s.z*i,this.y=s.y+t.y,this.z=s.z+t.z,this}rotateXNew(t,a){return this.clone().rotateX(t,a)}rotateY(t,a){const e=Math.sin(a),i=Math.cos(a),s=this.subtractNew(t).clone();return s.x=s.z*e+s.z*i,s.z=s.z*i-s.x*e,this.x=s.x+t.x,this.z=s.z+t.z,this}rotateyNew(t,a){return this.clone().rotateY(t,a)}rotateZ(t,a){const e=Math.sin(a),i=Math.cos(a),s=this.subtractNew(t).clone();return s.x=s.x*i-s.y*e,s.y=s.x*e+s.y*i,this.x=s.x+t.x,this.y=s.y+t.y,this}rotateZNew(t,a){return this.clone().rotateZ(t,a)}transformByMat4(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=16){const a=this.clone(),e=t[3]*a.x+t[7]*a.y+t[11]*a.z+t[15]||1;this.x=(t[0]*a.x+t[4]*a.y+t[8]*a.z+t[12])/e,this.y=(t[1]*a.x+t[5]*a.y+t[9]*a.z+t[13])/e,this.z=(t[2]*a.x+t[6]*a.y+t[10]*a.z+t[14])/e}return this}transformByMat4New(t){return this.clone().transformByMat4(t)}transformByMat3(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=9){const a=this.clone();this.x=t[0]*a.x+t[3]*a.y+t[6]*a.z,this.y=t[1]*a.x+t[4]*a.y+t[7]*a.z,this.z=t[2]*a.x+t[5]*a.y+t[8]*a.z}return this}transformByMat3New(t){return this.clone().transformByMat3(t)}transformByQuat(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=4){const a=this.clone(),e=new l(t[1]*a.z-t[2]*a.y,t[2]*a.x-t[0]*a.z,t[0]*a.y-t[1]*a.x),i=new l(t[1]*e.z-t[2]*e.y,t[2]*e.x-t[0]*e.z,t[0]*e.y-t[1]*e.x);e.scale(2*t[3]),i.scale(2*t[3]),this.add(e),this.add(i)}return this}transformByQuatNew(t){return this.clone().transformByQuat(t)}negate(){return this.multiplyScalar(-1)}negateNew(){return this.multiplyScalarNew(-1)}inverse(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this}inverseNew(){const t=this.clone();return t.x=1/t.x,t.y=1/t.y,t.z=1/t.z,t}normalise(){return this.divideScalar(this.length)}normaliseNew(){return this.divideScalarNew(this.length)}distance(t){return this.subtractNew(t).length}distanceX(t){return this.x-t.x}distanceY(t){return this.y-t.y}distanceZ(t){return this.z-t.z}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new l(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}crossNew(t){return this.clone().cross(t)}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}ceilNew(){return this.clone().ceil()}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}floorNew(){return this.clone().floor()}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundNew(){return this.clone().round()}fract(){return this.x-=Math.floor(this.x),this.y-=Math.floor(this.y),this.z-=Math.floor(this.z),this}fractNew(){return this.clone().fract()}set x(t){if("number"!=typeof t)throw new TypeError("X should be a number");e(this,o)[o]=t}get x(){return e(this,o)[o]||0}set y(t){if("number"!=typeof t)throw new TypeError("Y should be a number");e(this,u)[u]=t}get y(){return e(this,u)[u]||0}set z(t){if("number"!=typeof t)throw new TypeError("Y should be a number");e(this,y)[y]=t}get z(){return e(this,y)[y]||0}set lengthSquared(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}set length(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.length)}get length(){return Math.sqrt(this.lengthSquared)}set radius(t){this.x=t}get radius(){return this.x}set phi(t){this.y=t}get phi(){return this.y}set theta(t){this.z=t}get theta(){return this.z}set width(t){this.x=t}get width(){return this.x}set height(t){this.y=t}get height(){return this.y}set depth(t){this.z=t}get depth(){return this.z}get area(){return this.x*this.y*this.z}get array(){return[this.x,this.y,this.z]}get xyz(){return new l(this.x,this.y,this.z)}set xyz(t){if(t instanceof l)this.resetToVector(t);else{if(!(t instanceof Array&&t.length>=3))throw new Error("input should be of type Vector");this.reset(t[0],t[1],t[2])}}get yzx(){return new l(this.y,this.z,this.x)}set yzx(t){this.xyz=l.interpolate(t).yzx}get zxy(){return new l(this.z,this.x,this.y)}set zxy(t){this.xyz=l.interpolate(t).zxy}get xy(){return new n(this.x,this.y)}set xy(t){t=n.interpolate(t),this.x=t.x,this.y=t.y}get yz(){return new n(this.y,this.z)}set yz(t){t=n.interpolate(t),this.y=t.x,this.z=t.y}get zx(){return new n(this.z,this.x)}set zx(t){t=n.interpolate(t),this.z=t.x,this.x=t.y}get yx(){return new n(this.y,this.x)}set yx(t){t=n.interpolate(t),this.x=t.y,this.y=t.x}get zy(){return new n(this.z,this.y)}set zy(t){t=n.interpolate(t),this.z=t.y,this.y=t.x}get xx(){return new n(this.x,this.x)}set xx(t){t=n.interpolate(t),this.x=t.y}get yy(){return new n(this.y,this.y)}set yy(t){t=n.interpolate(t),this.y=t.y}get zz(){return new n(this.z,this.z)}set zz(t){t=n.interpolate(t),this.z=t.y}static interpolate(t){if(t instanceof l)return new l(t.x,t.y,t.z);if(t instanceof Array&&t.length>=3)return new l(t[0],t[1],t[2]);if(!isNaN(t))return new l(t,t,t);if("string"!=typeof t)throw new Error("The passed interpolant could not be parsed into a Vec3");{const a=t.split(","),e=Number(a[0]),i=Number(a[1]),s=Number(a[2]);if(a.length>=3&&!isNaN(e)&&!isNaN(i)&&!isNaN(s))return new l(e,i,s)}}static lerp(t,a,e){return new l(t.x+e*(a.x-t.x),t.y+e*(a.y-t.y),t.z+e*(a.z-t.z))}static getAngle(t,a){const e=t.xy,i=a.xy;let s=e.lengthSquared;s>0&&(s=1/Math.sqrt(s));let r=i.lengthSquared;r>0&&(r=1/Math.sqrt(r));let h=(e.x*i.x+e.y*i.y)*s*r;return h>1?0:h<-1?Math.PI:Math.acos(h)}static fromRotationMatrix(t,a="YXZ"){if(t.array&&(t=t.array),t instanceof Array&&t.length>=16){const e=new l;return"XYZ"===a?(e.y=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e.x=Math.atan2(-t[9],t[10]),e.z=Math.atan2(-t[4],t[0])):(e.x=Math.atan2(t[6],t[5]),e.z=0)):"YXZ"===a?(e.x=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e.y=Math.atan2(t[8],t[10]),e.z=Math.atan2(t[1],t[5])):(e.y=Math.atan2(-t[2],t[0]),e.z=0)):"ZXY"===a?(e.x=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e.y=Math.atan2(-t[2],t[10]),e.z=Math.atan2(-t[4],t[5])):(e.y=0,e.z=Math.atan2(t[1],t[0]))):"ZYX"===a?(e.y=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e.x=Math.atan2(t[6],t[10]),e.z=Math.atan2(t[1],t[0])):(e.x=0,e.z=Math.atan2(-t[4],t[5]))):"YZX"===a?(e.z=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e.x=Math.atan2(-t[9],t[5]),e.y=Math.atan2(-t[2],t[0])):(e.x=0,e.y=Math.atan2(t[8],t[10]))):"XZY"===a&&(e.z=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e.x=Math.atan2(t[6],t[5]),e.y=Math.atan2(t[8],t[0])):(e.x=Math.atan2(-t[9],t[10]),e.y=0)),e}}}class c{constructor(...t){this._x=0,this._y=0,this._z=0,this._w=0,this.reset(...t)}reset(...t){let[a,e,i,s]=t;return isNaN(a)&&(a=0),isNaN(e)&&(e=0),isNaN(i)&&(i=0),isNaN(s)&&(s=0),this.x=a,this.y=e,this.z=i,this.w=s,this}resetToVector(t){return t instanceof c&&(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w),this}clone(){return new c(this.x,this.y,this.z,this.w)}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addNew(t){return this.clone().add(t)}addScalar(t){return this.add(new c(t,t,t,t))}addScalarNew(t){return this.clone().addScalar(t)}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtractNew(t){return this.clone().subtract(t)}subtractScalar(t){return this.subtract(new c(t,t,t,t))}subtractScalarNew(t){return this.clone().subtractScalar(t)}divide(t){return 0!==t.x?this.x/=t.x:this.x=0,0!==t.y?this.y/=t.y:this.y=0,0!==t.z?this.z/=t.z:this.z=0,0!==t.w?this.w/=t.w:this.w=0,this}divideNew(t){return this.clone().divide(t)}divideScalar(t){var a=new c(t,t,t,t);return this.divide(a)}divideScalarNew(t){return this.clone().divideScalar(t)}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyNew(t){return this.clone().multiply(t)}multiplyScalar(t){var a=new c(t,t,t,t);return this.multiply(a)}multiplyScalarNew(t){return this.clone().multiplyScalar(t)}scale(t){return this.multiplyScalar(t)}scaleNew(t){return this.multiplyScalarNew(t)}rotateX(t,a){const e=Math.sin(a),i=Math.cos(a),s=this.subtractNew(t).clone();return s.y=s.y*i-s.z*e,s.z=s.y*e+s.z*i,this.y=s.y+t.y,this.z=s.z+t.z,this}rotateXNew(t,a){return this.clone().rotateX(t,a)}rotateY(t,a){const e=Math.sin(a),i=Math.cos(a),s=this.subtractNew(t).clone();return s.x=s.z*e+s.z*i,s.z=s.z*i-s.x*e,this.x=s.x+t.x,this.z=s.z+t.z,this}rotateYNew(t,a){return this.clone().rotateY(t,a)}rotateZ(t,a){const e=Math.sin(a),i=Math.cos(a),s=this.subtractNew(t).clone();return s.x=s.x*i-s.y*e,s.y=s.x*e+s.y*i,this.x=s.x+t.x,this.y=s.y+t.y,this}rotateZNew(t,a){return this.clone().rotateZ(t,a)}transformByMat4(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=16){const a=this.clone();this.x=(t[0]*a.x+t[4]*a.y+t[8]*a.z+t[12])/this.w,this.y=(t[1]*a.x+t[5]*a.y+t[9]*a.z+t[13])/this.w,this.z=(t[2]*a.x+t[6]*a.y+t[10]*a.z+t[14])/this.w,this.w=(t[3]*a.x+t[7]*a.y+t[11]*a.z+t[15])/this.w}return this}transformByMat4New(t){return this.clone().transformByMat4(t)}transformByQuat(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=4){const a=new c(t[3]*this.x+t[1]*this.z-t[2]*this.y,t[3]*this.y+t[2]*this.x-t[0]*this.z,t[3]*this.z+t[0]*this.y-t[1]*this.x,-t[0]*this.x-t[1]*this.y-t[2]*this.z);this.x=a.x*t[3]+a.w*-t[0]+a.y*-t[2]-a.z*-t[1],this.y=a.y*t[3]+a.w*-t[1]+a.z*-t[0]-a.x*-t[2],this.z=a.z*t[3]+a.w*-t[2]+a.x*-t[1]-a.y*-t[0]}return this}transformByQuatNew(t){return this.clone().transformByQuat(t)}negate(){return this.multiplyScalar(-1)}negateNew(){return this.multiplyScalarNew(-1)}inverse(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this.w=1/this.w,this}inverseNew(){const t=this.clone();return t.x=1/t.x,t.y=1/t.y,t.z=1/t.z,t.w=1/t.w,t}normalise(){const t=this.length;return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):this.divideScalar(t),this}normaliseNew(){return this.clone().normalise()}distance(t){return this.subtractNew(t).length}distanceX(t){return this.x-t.x}distanceY(t){return this.y-t.y}distanceZ(t){return this.z-t.z}distanceW(t){return this.w-t.w}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}cross(t,a){const e=this.clone(),i=t[0]*a[1]-t[1]*a[0],s=t[0]*a[2]-t[2]*a[0],r=t[0]*a[3]-t[3]*a[0],h=t[1]*a[2]-t[2]*a[1],n=t[1]*a[3]-t[3]*a[1],o=t[2]*a[3]-t[3]*a[2],u=e[0],y=e[1],l=e[2],w=e[3];return new c(y*o-l*n+w*h,-u*o+l*r-w*s,u*n-y*r+w*i,-u*h+y*s-l*i)}crossNew(t,a){return this.clone().cross(t,a)}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}ceilNew(){return this.clone().ceil()}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}floorNew(){return this.clone().floor()}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundNew(){return this.clone().round()}fract(){return this.x-=Math.floor(this.x),this.y-=Math.floor(this.y),this.z-=Math.floor(this.z),this.w-=Math.floor(this.w),this}fractNew(){return this.clone().fract()}set x(t){if("number"!=typeof t)throw new TypeError("X should be a number");this._x=t}get x(){return this._x||0}set y(t){if("number"!=typeof t)throw new TypeError("Y should be a number");this._y=t}get y(){return this._y||0}set z(t){if("number"!=typeof t)throw new TypeError("Y should be a number");this._z=t}get z(){return this._z||0}set w(t){if("number"!=typeof t)throw new TypeError("W should be a number");this._w=t}get w(){return this._w||0}set lengthSquared(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}set length(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.length)}get length(){return Math.sqrt(this.lengthSquared)}set width(t){this.x=t}get width(){return this.x}set height(t){this.y=t}get height(){return this.y}set depth(t){this.z=t}get depth(){return this.z}get area(){return this.x*this.y*this.z*this.w}get array(){return[this.x,this.y,this.z,this.w]}get xyzw(){return new c(this.x,this.y,this.z,this.w)}set xyzw(t){if(t instanceof c)this.resetToVector(t);else{if(!(t instanceof Array&&t.length>=4))throw new Error("input should be of type Vector");this.reset(t[0],t[1],t[2],t[3])}}get yzwx(){return new c(this.y,this.z,this.w,this.x)}set yzwx(t){this.xyzw=c.interpolate(t).yzwx}get zwxy(){return new c(this.z,this.w,this.x,this.y)}set zwxy(t){this.xyzw=c.interpolate(t).zwxy}get wxyz(){return new c(this.w,this.x,this.y,this.z)}set wxyz(t){this.xyzw=c.interpolate(t).wxyz}get xyz(){return new l(this.x,this.y,this.z)}set xyz(t){t=l.interpolate(t),this.x=t.x,this.y=t.y,this.z=t.z}get yzx(){return new l(this.y,this.z,this.x)}set yzx(t){t=l.interpolate(t),this.x=t.y,this.y=t.z,this.z=t.x}get zxy(){return new l(this.z,this.x,this.y)}set zxy(t){t=l.interpolate(t),this.x=t.z,this.y=t.x,this.z=t.y}get xx(){return new n(this.x,this.x)}set xx(t){t=n.interpolate(t),this.x=t.y}get xy(){return new n(this.x,this.y)}set xy(t){t=n.interpolate(t),this.x=t.x,this.y=t.y}get xz(){return new n(this.x,this.z)}set xz(t){t=n.interpolate(t),this.x=t.x,this.z=t.y}get xw(){return new n(this.x,this.w)}set xw(t){t=n.interpolate(t),this.x=t.x,this.z=t.y}get yx(){return new n(this.y,this.x)}set yx(t){t=n.interpolate(t),this.x=t.y,this.y=t.x}get yy(){return new n(this.y,this.y)}set yy(t){t=n.interpolate(t),this.y=t.y}get yz(){return new n(this.y,this.z)}set yz(t){t=n.interpolate(t),this.y=t.x,this.z=t.y}get yw(){return new n(this.y,this.w)}set yw(t){t=n.interpolate(t),this.y=t.x,this.w=t.y}get zx(){return new n(this.z,this.x)}set zx(t){t=n.interpolate(t),this.z=t.x,this.x=t.y}get zy(){return new n(this.z,this.y)}set zy(t){t=n.interpolate(t),this.z=t.y,this.y=t.x}get zz(){return new n(this.z,this.z)}set zz(t){t=n.interpolate(t),this.z=t.y}get zw(){return new n(this.z,this.w)}set zw(t){t=n.interpolate(t),this.z=t.x,this.w=t.y}get wx(){return new n(this.w,this.x)}set wx(t){t=n.interpolate(t),this.w=t.x,this.x=t.y}get wy(){return new n(this.w,this.y)}set wy(t){t=n.interpolate(t),this.w=t.x,this.y=t.y}get wz(){return new n(this.w,this.z)}set wz(t){t=n.interpolate(t),this.w=t.x,this.z=t.y}get ww(){return new n(this.w,this.w)}set ww(t){t=n.interpolate(t),this.w=t.y}static interpolate(t){if(t instanceof c)return new c(t.x,t.y,t.z,t.w);if(t instanceof Array&&t.length>=4)return new c(t[0],t[1],t[2],t[3]);if(!isNaN(t))return new c(t,t,t,t);if("string"!=typeof t)throw new Error("The passed interpolant could not be parsed into a Vec4");{const a=t.split(","),e=Number(a[0]),i=Number(a[1]),s=Number(a[2]),r=Number(a[3]);if(a.length>=3&&!isNaN(e)&&!isNaN(i)&&!isNaN(s)&&!isNaN(r))return new c(e,i,s,r)}}static lerp(t,a,e){return new c(t.x+e*(a.x-t.x),t.y+e*(a.y-t.y),t.z+e*(a.z-t.z),t.w+e*(a.w-t.w))}static getAngle(t,a){let e=t.dot(a);return Math.acos(2*e*e-1)}}const w=[1,0,0,1],x=function(t,a){return isNaN(t)?w[function(t){return["a11","a12","a21","a22"].indexOf(t)}(a)]:Number(t)};var d=a("a11"),z=a("a12"),b=a("a21"),f=a("a22");class p{constructor(...t){Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),e(this,d)[d]=0,e(this,z)[z]=0,e(this,b)[b]=0,e(this,f)[f]=0;const[a,i,s,r]=t;this.reset(a,i,s,r)}reset(t,a,e,i){return this.a11=x(t,"a11"),this.a12=x(a,"a12"),this.a21=x(e,"a21"),this.a22=x(i,"a22"),this}resetToMat2(t){return this.a11=t.a11,this.a12=t.a12,this.a21=t.a21,this.a22=t.a22,this}clone(){return new p(this.a11,this.a12,this.a21,this.a22)}transpose(){const t=this.a12;return this.a12=this.a21,this.a21=t,this}transposeNew(){return this.clone().transpose()}add(t){return this.a11+=t.a11,this.a12+=t.a12,this.a21+=t.a21,this.a22+=t.a22,this}addNew(t){return this.clone().add(t)}subtract(t){return this.a11-=t.a11,this.a12-=t.a12,this.a21-=t.a21,this.a22-=t.a22,this}subtractNew(t){return this.clone().subtract(t)}multiply(t){const a=this.clone();return this.a11=a.a11*t.a11+a.a21*t.a12,this.a12=a.a12*t.a11+a.a22*t.a12,this.a21=a.a11*t.a21+a.a21*t.a22,this.a22=a.a12*t.a21+a.a22*t.a22,this}multiplyNew(t){return this.clone().multiply(t)}multiplyScalar(t){return this.a11*=t,this.a12*=t,this.a21*=t,this.a22*=t,this}multiplyScalarNew(t){return this.clone().multiplyScalar(t)}scale(t){return this.multiplyScalar(t)}scaleNew(t){return this.multiplyScalarNew(t)}scaleByVec2(t){return t.array&&(t=t.array),t instanceof Array&&(this.a11*=t[0],this.a12*=t[0],this.a21*=t[1],this.a22*=t[1]),this}scaleByVec2New(t){return this.clone().scaleByVec2(t)}rotate(t){const a=this.clone(),e=Math.sin(t),i=Math.cos(t);return this.a11=a.a11*i+a.a21*e,this.a12=a.a12*i+a.a22*e,this.a21=a.a11*-e+a.a21*i,this.a22=a.a12*-e+a.a22*i,this}rotateNew(t){return this.clone().rotate(t)}invert(){const t=this.clone();let a=this.determinant;return a&&(a=1/a,this.a11=t.a22*a,this.a12=-t.a12*a,this.a21=-t.a21*a,this.a22=t.a11*a),this}invertNew(){return this.clone().invert()}adjoint(){const t=this.a11;return this.a11=this.a22,this.a12=-this.a12,this.a21=-this.a21,this.a22=t,this}adjointNew(){return this.clone().adjoint()}toString(){return`\n      ${this.a11}, ${this.a12},\n      ${this.a21}, ${this.a22}\n    `}set a11(t){if("number"!=typeof t)throw new TypeError("a11 should be a number");e(this,d)[d]=t}get a11(){return e(this,d)[d]||0}set a12(t){if("number"!=typeof t)throw new TypeError("a12 should be a number");e(this,z)[z]=t}get a12(){return e(this,z)[z]||0}set a21(t){if("number"!=typeof t)throw new TypeError("a21 should be a number");e(this,b)[b]=t}get a21(){return e(this,b)[b]||0}set a22(t){if("number"!=typeof t)throw new TypeError("a22 should be a number");e(this,f)[f]=t}get a22(){return e(this,f)[f]||0}get determinant(){return this.a11*this.a21-this.a21*this.a12}get array(){return[this.a11,this.a12,this.a21,this.a22]}get columnArray(){return[this.a11,this.a21,this.a12,this.a22]}static fromAngle(t){let a=Math.sin(t),e=Math.cos(t);return new p(e,-a,a,e)}static fromScalingVec2(t){return t.array&&(t=t.array),t instanceof Array?new p(t[0],0,0,t[1]):p.identity()}static identity(){return new p(...w)}}const m=[1,0,0,0,1,0,0,0,1],g=function(t,a){return isNaN(t)?m[function(t){return["a11","a12","a13","a21","a22","a23","a31","a32","a33"].indexOf(t)}(a)]:Number(t)};var N=a("a11"),M=a("a12"),v=a("a13"),S=a("a21"),T=a("a22"),E=a("a23"),j=a("a31"),O=a("a32"),P=a("a33");class B{constructor(...t){Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),e(this,N)[N]=0,e(this,M)[M]=0,e(this,v)[v]=0,e(this,S)[S]=0,e(this,T)[T]=0,e(this,E)[E]=0,e(this,j)[j]=0,e(this,O)[O]=0,e(this,P)[P]=0,this.reset(...t)}reset(...t){const[a,e,i,s,r,h,n,o,u]=t;return this.a11=g(a,"a11"),this.a12=g(e,"a12"),this.a13=g(i,"a13"),this.a21=g(s,"a21"),this.a22=g(r,"a22"),this.a23=g(h,"a23"),this.a31=g(n,"a31"),this.a32=g(o,"a32"),this.a33=g(u,"a33"),this}resetToMat3(t){return this.a11=t.a11,this.a12=t.a12,this.a13=t.a13,this.a21=t.a21,this.a22=t.a22,this.a23=t.a23,this.a31=t.a31,this.a32=t.a32,this.a33=t.a33,this}clone(){return new B(this.a11,this.a12,this.a13,this.a21,this.a22,this.a23,this.a31,this.a32,this.a33)}transpose(){const t=this.a12,a=this.a13,e=this.a23;return this.a12=this.a21,this.a13=this.a31,this.a21=t,this.a23=this.a32,this.a31=a,this.a32=e,this}transposeNew(){return this.clone().transpose()}adjoint(){const t=this.clone();return this.a11=t.a22*t.a33-t.a23*t.a32,this.a12=t.a13*t.a32-t.a12*t.a33,this.a13=t.a12*t.a23-t.a13*t.a22,this.a21=t.a23*t.a31-t.a21*t.a33,this.a22=t.a11*t.a33-t.a13*t.a31,this.a23=t.a13*t.a21-t.a11*t.a23,this.a31=t.a21*t.a32-t.a22*t.a31,this.a32=t.a12*t.a31-t.a11*t.a32,this.a33=t.a11*t.a22-t.a12*t.a21,this}adjointNew(){return this.clone().adjoint()}add(t){return this.a11+=t.a11,this.a12+=t.a12,this.a13+=t.a13,this.a21+=t.a21,this.a22+=t.a22,this.a23+=t.a23,this.a31+=t.a31,this.a32+=t.a32,this.a33+=t.a33,this}addNew(t){return this.clone().add(t)}subtract(t){return this.a11-=t.a11,this.a12-=t.a12,this.a13-=t.a13,this.a21-=t.a21,this.a22-=t.a22,this.a23-=t.a23,this.a31-=t.a31,this.a32-=t.a32,this.a33-=t.a33,this}subtractNew(t){return this.clone().subtract(t)}multiply(t){const a=this.clone();return this.a11=t.a11*a.a11+t.a12*a.a21+t.a13*a.a31,this.a12=t.a11*a.a12+t.a12*a.a22+t.a13*a.a32,this.a13=t.a11*a.a13+t.a12*a.a23+t.a13*a.a33,this.a21=t.a21*a.a11+t.a22*a.a21+t.a23*a.a31,this.a22=t.a21*a.a12+t.a22*a.a22+t.a23*a.a32,this.a23=t.a21*a.a13+t.a22*a.a23+t.a23*a.a33,this.a31=t.a31*a.a11+t.a32*a.a21+t.a33*a.a31,this.a32=t.a31*a.a12+t.a32*a.a22+t.a33*a.a32,this.a33=t.a31*a.a13+t.a32*a.a23+t.a33*a.a33,this}multiplyNew(t){return this.clone().multiply(t)}multiplyScalar(t){return this.a11*=t,this.a12*=t,this.a13*=t,this.a21*=t,this.a22*=t,this.a23*=t,this.a31*=t,this.a32*=t,this.a33*=t,this}multiplyScalarNew(t){return this.clone().multiplyScalar(t)}scale(t){return this.multiplyScalar(t)}scaleNew(t){return this.multiplyScalarNew(t)}scaleByVec2(t){return t.array&&(t=t.array),this.a11*=t[0],this.a12*=t[0],this.a13*=t[0],this.a21*=t[1],this.a22*=t[1],this.a23*=t[1],this}scaleByVec2New(t){return this.clone().scaleByVec2(t)}rotate(t){const a=this.clone(),e=Math.sin(t),i=Math.cos(t);return this.a11=a.a11*i+a.a21*e,this.a12=a.a12*i+a.a22*e,this.a13=a.a13*i+a.a23*e,this.a21=a.a21*i-a.a11*e,this.a22=a.a22*i-a.a12*e,this.a23=a.a23*i-a.a13*e,this}rotateNew(t){return this.clone().rotate(t)}invert(){const t=this.clone(),{f:{b01:a,b11:e,b21:i},determinant:s}=this.determinantFunction;if(s){const r=1/s;this.a11=a*r,this.a12=(-t.a33*t.a12+t.a13*t.a32)*r,this.a13=(t.a23*t.a12-t.a13*t.a22)*r,this.a21=e*r,this.a22=(t.a33*t.a11-t.a13*t.a31)*r,this.a23=(-t.a23*t.a11+t.a13*t.a21)*r,this.a31=i*r,this.a32=(-t.a32*t.a11+t.a12*t.a31)*r,this.a33=(t.a22*t.a11-t.a12*t.a21)*r}return this}invertNew(){return this.clone().invert()}toString(){return`\n      ${this.a11}, ${this.a12}, ${this.a13},\n      ${this.a21}, ${this.a22}, ${this.a23},\n      ${this.a31}, ${this.a32}, ${this.a33}\n    `}set a11(t){if("number"!=typeof t)throw new TypeError("a11 should be a number");e(this,N)[N]=t}get a11(){return e(this,N)[N]||0}set a12(t){if("number"!=typeof t)throw new TypeError("a12 should be a number");e(this,M)[M]=t}get a12(){return e(this,M)[M]||0}set a13(t){if("number"!=typeof t)throw new TypeError("a13 should be a number");e(this,v)[v]=t}get a13(){return e(this,v)[v]||0}set a21(t){if("number"!=typeof t)throw new TypeError("a21 should be a number");e(this,S)[S]=t}get a21(){return e(this,S)[S]||0}set a22(t){if("number"!=typeof t)throw new TypeError("a22 should be a number");e(this,T)[T]=t}get a22(){return e(this,T)[T]||0}set a23(t){if("number"!=typeof t)throw new TypeError("a23 should be a number");e(this,E)[E]=t}get a23(){return e(this,E)[E]||0}set a31(t){if("number"!=typeof t)throw new TypeError("a31 should be a number");e(this,j)[j]=t}get a31(){return e(this,j)[j]||0}set a32(t){if("number"!=typeof t)throw new TypeError("a32 should be a number");e(this,O)[O]=t}get a32(){return e(this,O)[O]||0}set a33(t){if("number"!=typeof t)throw new TypeError("a33 should be a number");e(this,P)[P]=t}get a33(){return e(this,P)[P]||0}get frobeniusnorm(){return Math.hypot(...this.array)}get array(){return[this.a11,this.a12,this.a13,this.a21,this.a22,this.a23,this.a31,this.a32,this.a33]}get columnArray(){return[this.a11,this.a21,this.a31,this.a12,this.a22,this.a32,this.a13,this.a23,this.a33]}get determinantFunction(){let t=this.a33*this.a22-this.a23*this.a32,a=-this.a33*this.a21+this.a23*this.a31,e=this.a32*this.a21-this.a22*this.a31;return{f:{b01:t,b11:a,b21:e},determinant:this.a11*t+this.a12*a+this.a13*e}}get determinant(){return this.determinantFunction.determinant}static fromAngle(t){let a=Math.sin(t),e=Math.cos(t);return new B(e,-a,0,a,e,0,0,0,0)}static fromScalingVec2(t){return t.array&&(t=t.array),t instanceof Array?new B(t[0],0,0,0,t[1],0,0,0,1):B.identity()}static fromQuat(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=4){const[a,e,i,s]=t,[r,h,n]=t.map(t=>2*t),o=a*r,u=e*r,y=e*h,l=i*r,c=i*h,w=i*n,x=s*r,d=s*h,z=s*n;return new B(1-y-w,u-z,l+d,u+z,1-o-w,c-x,l-d,c+x,1-o-y)}}static fromMat4(t){const{f:{b00:a,b01:e,b02:i,b03:s,b04:r,b05:h,b06:n,b07:o,b08:u,b09:y,b10:l,b11:c},determinant:w}=t.determinantFunction;if(!w)return null;const x=1/w;return new B((t.a22*c-t.a23*l+t.a24*y)*x,(t.a23*u-t.a21*c-t.a24*o)*x,(t.a21*l-t.a22*u+t.a24*n)*x,(t.a13*l-t.a12*c-t.a14*y)*x,(t.a11*c-t.a13*u+t.a14*o)*x,(t.a12*u-t.a11*l-t.a14*n)*x,(t.a42*h-t.a43*r+t.a44*s)*x,(t.a43*i-t.a41*h-t.a44*e)*x,(t.a41*r-t.a42*i+t.a44*a)*x)}static fromProjection(t,a){return new B(2/t,0,0,0,-2/a,0,-1,1,1)}static identity(){return new B(...m)}}const $=[0,0,0,1],A=function(t,a){return isNaN(t)?$[function(t){return["x","y","z","w"].indexOf(t)}(a)]:Number(t)};class q extends c{constructor(...t){super(...t),this.reset(...t)}reset(...t){let[a,e,i,s]=t;return this.x=A(a,"x"),this.y=A(e,"y"),this.z=A(i,"z"),this.w=A(s,"w"),this}resetToQuat(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}clone(){return new q(this.x,this.y,this.z,this.w)}toString(){return`${this.x}, ${this.y}, ${this.z}, ${this.w}`}multiply(t){const a=this.clone();return this.x=a.x*t.w+a.w*t.x+a.y*t.z-a.z*t.y,this.y=a.y*t.w+a.w*t.y+a.z*t.x-a.x*t.z,this.z=a.z*t.w+a.w*t.z+a.x*t.y-a.y*t.x,this.w=a.w*t.w-a.x*t.x-a.y*t.y-a.z*t.z,this}multiplyNew(t){return this.clone().multiply(t)}rotateX(t,a){a*=.5;const e=this.clone(),i=Math.sin(a),s=Math.cos(a);return this.x=e.x*s+e.w*i,this.y=e.y*s+e.z*i,this.z=e.z*s-e.y*i,this.w=e.w*s-e.x*i,this}rotateY(t,a){a*=.5;const e=this.clone(),i=Math.sin(a),s=Math.cos(a);return this.x=e.x*s-e.z*i,this.y=e.y*s+e.w*i,this.z=e.z*s+e.x*i,this.w=e.w*s-e.y*i,this}rotateZ(t,a){a*=.5;const e=this.clone(),i=Math.sin(a),s=Math.cos(a);return this.x=e.x*s+e.y*i,this.y=e.y*s-e.x*i,this.z=e.z*s+e.w*i,this.w=e.w*s-e.z*i,this}get normalW(){return Math.sqrt(Math.abs(1-this.x*this.x-this.y*this.y-this.z*this.z))}static fromAxisAngle(t,a){t=l.interpolate(t),a*=.5;const e=Math.sin(a);return new q(e*t.x,e*t.y,e*t.z,Math.cos(a))}static fromEuler(t,a="YXZ"){if(t.array&&(t=t.array),t instanceof Array&&t.length>=3){const e=new q;let i=Math.sin(.5*t[0]),s=Math.cos(.5*t[0]),r=Math.sin(.5*t[1]),h=Math.cos(.5*t[1]),n=Math.sin(.5*t[2]),o=Math.cos(.5*t[2]);return"XYZ"===a?(e.x=i*h*o+s*r*n,e.y=s*r*o-i*h*n,e.z=s*h*n+i*r*o,e.w=s*h*o-i*r*n):"YXZ"===a?(e.x=i*h*o+s*r*n,e.y=s*r*o-i*h*n,e.z=s*h*n-i*r*o,e.w=s*h*o+i*r*n):"ZXY"===a?(e.x=i*h*o-s*r*n,e.y=s*r*o+i*h*n,e.z=s*h*n+i*r*o,e.w=s*h*o-i*r*n):"ZYX"===a?(e.x=i*h*o-s*r*n,e.y=s*r*o+i*h*n,e.z=s*h*n-i*r*o,e.w=s*h*o+i*r*n):"YZX"===a?(e.x=i*h*o+s*r*n,e.y=s*r*o+i*h*n,e.z=s*h*n-i*r*o,e.w=s*h*o-i*r*n):"XZY"===a&&(e.x=i*h*o-s*r*n,e.y=s*r*o-i*h*n,e.z=s*h*n+i*r*o,e.w=s*h*o+i*r*n),e}}}const Y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],X=function(t,a){return isNaN(t)?Y[function(t){return["a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44"].indexOf(t)}(a)]:Number(t)};var V=a("a11"),Z=a("a12"),_=a("a13"),D=a("a14"),Q=a("a21"),F=a("a22"),R=a("a23"),I=a("a24"),W=a("a31"),k=a("a32"),C=a("a33"),G=a("a34"),H=a("a41"),J=a("a42"),K=a("a43"),L=a("a44");class U{constructor(...t){Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,F,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),e(this,V)[V]=0,e(this,Z)[Z]=0,e(this,_)[_]=0,e(this,D)[D]=0,e(this,Q)[Q]=0,e(this,F)[F]=0,e(this,R)[R]=0,e(this,I)[I]=0,e(this,W)[W]=0,e(this,k)[k]=0,e(this,C)[C]=0,e(this,G)[G]=0,e(this,H)[H]=0,e(this,J)[J]=0,e(this,K)[K]=0,e(this,L)[L]=0,this.reset(...t)}reset(...t){const[a,e,i,s,r,h,n,o,u,y,l,c,w,x,d,z]=t;return this.a11=X(a,"a11"),this.a12=X(e,"a12"),this.a13=X(i,"a13"),this.a14=X(s,"a14"),this.a21=X(r,"a21"),this.a22=X(h,"a22"),this.a23=X(n,"a23"),this.a24=X(o,"a24"),this.a31=X(u,"a31"),this.a32=X(y,"a32"),this.a33=X(l,"a33"),this.a34=X(c,"a34"),this.a41=X(w,"a41"),this.a42=X(x,"a42"),this.a43=X(d,"a43"),this.a44=X(z,"a44"),this}resetToMat4(t){return this.a11=t.a11,this.a12=t.a12,this.a13=t.a13,this.a14=t.a14,this.a21=t.a21,this.a22=t.a22,this.a23=t.a23,this.a24=t.a24,this.a31=t.a31,this.a32=t.a32,this.a33=t.a33,this.a34=t.a34,this.a41=t.a41,this.a42=t.a42,this.a43=t.a43,this.a44=t.a44,this}clone(){return new U(this.a11,this.a12,this.a13,this.a14,this.a21,this.a22,this.a23,this.a24,this.a31,this.a32,this.a33,this.a34,this.a41,this.a42,this.a43,this.a44)}transpose(){const t=this.a12,a=this.a13,e=this.a14,i=this.a23,s=this.a24,r=this.a34;return this.a12=this.a21,this.a13=this.a31,this.a14=this.a41,this.a21=t,this.a23=this.a32,this.a24=this.a42,this.a31=a,this.a32=i,this.a34=this.a43,this.a41=e,this.a42=s,this.a43=r,this}transposeNew(){return this.clone().transpose()}add(t){return this.a11+=t.a11,this.a12+=t.a12,this.a13+=t.a13,this.a14+=t.a14,this.a21+=t.a21,this.a22+=t.a22,this.a23+=t.a23,this.a24+=t.a24,this.a31+=t.a31,this.a32+=t.a32,this.a33+=t.a33,this.a34+=t.a34,this.a41+=t.a41,this.a42+=t.a42,this.a43+=t.a43,this.a44+=t.a44,this}addNew(t){return this.clone().add(t)}subtract(t){return this.a11-=t.a11,this.a12-=t.a12,this.a13-=t.a13,this.a14-=t.a14,this.a21-=t.a21,this.a22-=t.a22,this.a23-=t.a23,this.a24-=t.a24,this.a31-=t.a31,this.a32-=t.a32,this.a33-=t.a33,this.a34-=t.a34,this.a41-=t.a41,this.a42-=t.a42,this.a43-=t.a43,this.a44-=t.a44,this}subtractNew(t){return this.clone().subtract(t)}multiply(t){const a=this.clone();return this.a11=t.a11*a.a11+t.a12*a.a21+t.a13*a.a31+t.a14*a.a41,this.a12=t.a11*a.a12+t.a12*a.a22+t.a13*a.a32+t.a14*a.a42,this.a13=t.a11*a.a13+t.a12*a.a23+t.a13*a.a33+t.a14*a.a43,this.a14=t.a11*a.a14+t.a12*a.a24+t.a13*a.a34+t.a14*a.a44,this.a21=t.a21*a.a11+t.a22*a.a21+t.a23*a.a31+t.a24*a.a41,this.a22=t.a21*a.a12+t.a22*a.a22+t.a23*a.a32+t.a24*a.a42,this.a23=t.a21*a.a13+t.a22*a.a23+t.a23*a.a33+t.a24*a.a43,this.a24=t.a21*a.a14+t.a22*a.a24+t.a23*a.a34+t.a24*a.a44,this.a31=t.a31*a.a11+t.a32*a.a21+t.a33*a.a31+t.a34*a.a41,this.a32=t.a31*a.a12+t.a32*a.a22+t.a33*a.a32+t.a34*a.a42,this.a33=t.a31*a.a13+t.a32*a.a23+t.a33*a.a33+t.a34*a.a43,this.a34=t.a31*a.a14+t.a32*a.a24+t.a33*a.a34+t.a34*a.a44,this.a41=t.a41*a.a11+t.a42*a.a21+t.a43*a.a31+t.a44*a.a41,this.a42=t.a41*a.a12+t.a42*a.a22+t.a43*a.a32+t.a44*a.a42,this.a43=t.a41*a.a13+t.a42*a.a23+t.a43*a.a33+t.a44*a.a43,this.a44=t.a41*a.a14+t.a42*a.a24+t.a43*a.a34+t.a44*a.a44,this}multiplyNew(t){return this.clone().multiply(t)}multiplyScalar(t){return this.a11*=t,this.a12*=t,this.a13*=t,this.a14*=t,this.a21*=t,this.a22*=t,this.a23*=t,this.a24*=t,this.a31*=t,this.a32*=t,this.a33*=t,this.a34*=t,this.a41*=t,this.a42*=t,this.a43*=t,this.a44*=t,this}multiplyScalarNew(t){return this.clone().multiplyScalar(t)}scale(t){return this.multiplyScalar(t)}scaleNew(t){return this.multiplyScalarNew(t)}scaleByVec3(t){t.array&&(t=t.array),t=t.concat([1,1,1]);const[a,e,i]=t;return this.a11*=a,this.a12*=a,this.a13*=a,this.a14*=a,this.a21*=e,this.a22*=e,this.a23*=e,this.a24*=e,this.a31*=i,this.a32*=i,this.a33*=i,this.a34*=i,this}scaleByVec3New(t){return this.clone().scaleByVec3(t)}transform(t){t.array&&(t=t.array),t=t.concat([0,0,0]);const[a,e,i]=t;return this.a14+=a,this.a24+=e,this.a34+=i,this}transformNew(t){return this.clone().transform(t)}transformTo(t){t.array&&(t=t.array),t=t.concat([0,0,0]);const[a,e,i]=t;return this.a14=a,this.a24=e,this.a34=i,this}transformToNew(t){return this.clone().transform(t)}rotate(t,a){if(a.array&&(a=a.array),!a.length||a.length<3)return this;let e=Math.hypot(a[0],a[1],a[2]);if(e<1e-4)return this;e=1/e;const i=a[0]/e,s=a[1]/e,r=a[2]/e,h=Math.sin(t),n=Math.cos(t),o=1-n,u=this.clone(),y=new U;return y.a11=i*i*o+n,y.a12=s*i*o+r*h,y.a13=r*i*o-s*h,y.a21=i*s*o-r*h,y.a22=s*s*o+n,y.a23=r*s*o+i*h,y.a31=i*r*o+s*h,y.a32=s*r*o-i*h,y.a33=r*r*o+n,this.a11=u.a11*y.a11+u.a21*y.a12+u.a31*y.a13,this.a12=u.a12*y.a11+u.a22*y.a12+u.a32*y.a13,this.a13=u.a13*y.a11+u.a23*y.a12+u.a33*y.a13,this.a14=u.a14*y.a11+u.a24*y.a12+u.a34*y.a13,this.a21=u.a11*y.a21+u.a21*y.a22+u.a31*y.a23,this.a22=u.a12*y.a21+u.a22*y.a22+u.a32*y.a23,this.a23=u.a13*y.a21+u.a23*y.a22+u.a33*y.a23,this.a24=u.a14*y.a21+u.a24*y.a22+u.a34*y.a23,this.a31=u.a11*y.a31+u.a21*y.a32+u.a31*y.a33,this.a32=u.a12*y.a31+u.a22*y.a32+u.a32*y.a33,this.a33=u.a13*y.a31+u.a23*y.a32+u.a33*y.a33,this.a34=u.a14*y.a31+u.a24*y.a32+u.a34*y.a33,this}rotateNew(t,a){return this.clone().rotate(t,a)}invert(){const t=this.clone(),{f:{b00:a,b01:e,b02:i,b03:s,b04:r,b05:h,b06:n,b07:o,b08:u,b09:y,b10:l,b11:c},determinant:w}=this.determinantFunction;if(w){const x=1/w;this.a11=(t.a22*c-t.a23*l+t.a24*y)*x,this.a12=(t.a13*l-t.a12*c-t.a14*y)*x,this.a13=(t.a42*h-t.a43*r+t.a44*s)*x,this.a14=(t.a33*r-t.a32*h-t.a34*s)*x,this.a21=(t.a23*u-t.a21*c-t.a24*o)*x,this.a22=(t.a11*c-t.a13*u+t.a14*o)*x,this.a23=(t.a43*i-t.a41*h-t.a44*e)*x,this.a24=(t.a31*h-t.a33*i+t.a34*e)*x,this.a31=(t.a21*l-t.a22*u+t.a24*n)*x,this.a32=(t.a12*u-t.a11*l-t.a14*n)*x,this.a33=(t.a41*r-t.a42*i+t.a44*a)*x,this.a34=(t.a32*i-t.a31*r-t.a34*a)*x,this.a41=(t.a22*o-t.a21*y-t.a23*n)*x,this.a42=(t.a11*y-t.a12*o+t.a13*n)*x,this.a43=(t.a42*e-t.a41*s-t.a43*a)*x,this.a44=(t.a31*s-t.a32*e+t.a33*a)*x}return this}invertNew(){return this.clone().invert()}toString(){return`\n      ${this.a11}, ${this.a12}, ${this.a13}, ${this.a14},\n      ${this.a21}, ${this.a22}, ${this.a23}, ${this.a24},\n      ${this.a31}, ${this.a32}, ${this.a33}, ${this.a34},\n      ${this.a41}, ${this.a42}, ${this.a43}, ${this.a44}\n    `}set a11(t){if("number"!=typeof t)throw new TypeError("a11 should be a number");e(this,V)[V]=t}get a11(){return e(this,V)[V]||0}set a12(t){if("number"!=typeof t)throw new TypeError("a12 should be a number");e(this,Z)[Z]=t}get a12(){return e(this,Z)[Z]||0}set a13(t){if("number"!=typeof t)throw new TypeError("a13 should be a number");e(this,_)[_]=t}get a13(){return e(this,_)[_]||0}set a14(t){if("number"!=typeof t)throw new TypeError("a14 should be a number");e(this,D)[D]=t}get a14(){return e(this,D)[D]||0}set a21(t){if("number"!=typeof t)throw new TypeError("a21 should be a number");e(this,Q)[Q]=t}get a21(){return e(this,Q)[Q]||0}set a22(t){if("number"!=typeof t)throw new TypeError("a22 should be a number");e(this,F)[F]=t}get a22(){return e(this,F)[F]||0}set a23(t){if("number"!=typeof t)throw new TypeError("a23 should be a number");e(this,R)[R]=t}get a23(){return e(this,R)[R]||0}set a24(t){if("number"!=typeof t)throw new TypeError("a24 should be a number");e(this,I)[I]=t}get a24(){return e(this,I)[I]||0}set a31(t){if("number"!=typeof t)throw new TypeError("a31 should be a number");e(this,W)[W]=t}get a31(){return e(this,W)[W]||0}set a32(t){if("number"!=typeof t)throw new TypeError("a32 should be a number");e(this,k)[k]=t}get a32(){return e(this,k)[k]||0}set a33(t){if("number"!=typeof t)throw new TypeError("a33 should be a number");e(this,C)[C]=t}get a33(){return e(this,C)[C]||0}set a34(t){if("number"!=typeof t)throw new TypeError("a34 should be a number");e(this,G)[G]=t}get a34(){return e(this,G)[G]||0}set a41(t){if("number"!=typeof t)throw new TypeError("a41 should be a number");e(this,H)[H]=t}get a41(){return e(this,H)[H]||0}set a42(t){if("number"!=typeof t)throw new TypeError("a42 should be a number");e(this,J)[J]=t}get a42(){return e(this,J)[J]||0}set a43(t){if("number"!=typeof t)throw new TypeError("a43 should be a number");e(this,K)[K]=t}get a43(){return e(this,K)[K]||0}set a44(t){if("number"!=typeof t)throw new TypeError("a44 should be a number");e(this,L)[L]=t}get a44(){return e(this,L)[L]||0}get frobeniusnorm(){return Math.hypot(...this.array)}get translation(){return new l(this.a41,this.a42,this.a43)}get scaling(){return new l(Math.hypot(this.a11,this.a12,this.a13),Math.hypot(this.a21,this.a22,this.a23),Math.hypot(this.a31,this.a32,this.a33))}get rotation(){const t=this.scaling.inverse();let a=this.a11*t.x,e=this.a12*t.y,i=this.a13*t.z,s=this.a21*t.x,r=this.a22*t.y,h=this.a23*t.z,n=this.a31*t.x,o=this.a32*t.y,u=this.a33*t.z;const y=a+r+u;let l=0;return y>0?(l=2*Math.sqrt(y+1),new q((h-o)/l,(n-i)/l,(e-s)/l,.25*l)):a>r&&a>u?(l=2*Math.sqrt(1+a-r-u),new q(.25*l,(e+s)/l,(n+i)/l,(h-o)/l)):r>u?(l=2*Math.sqrt(1+r-a-u),new q((e+s)/l,.25*l,(h+o)/l,(n-i)/l)):(l=2*Math.sqrt(1+u-a-r),new q((n+i)/l,(h+o)/l,.25*l,(e-s)/l))}get determinantFunction(){let t=this.a11*this.a22-this.a12*this.a21,a=this.a11*this.a23-this.a13*this.a21,e=this.a11*this.a24-this.a14*this.a21,i=this.a12*this.a23-this.a13*this.a22,s=this.a12*this.a24-this.a14*this.a22,r=this.a13*this.a24-this.a14*this.a23,h=this.a31*this.a42-this.a32*this.a41,n=this.a31*this.a43-this.a33*this.a41,o=this.a31*this.a44-this.a34*this.a41,u=this.a32*this.a43-this.a33*this.a42,y=this.a32*this.a44-this.a34*this.a42,l=this.a33*this.a44-this.a34*this.a43;return{f:{b00:t,b01:a,b02:e,b03:i,b04:s,b05:r,b06:h,b07:n,b08:o,b09:u,b10:y,b11:l},determinant:t*l-a*y+e*u+i*o-s*n+r*h}}get determinant(){return this.determinantFunction.determinant}get array(){return[this.a11,this.a12,this.a13,this.a14,this.a21,this.a22,this.a23,this.a24,this.a31,this.a32,this.a33,this.a34,this.a41,this.a42,this.a43,this.a44]}static fromRotation(t,a){return(new U).rotate(t,a)}static fromXRotation(t){const a=Math.sin(t),e=Math.cos(t);return new U(1,0,0,0,0,e,a,0,0,-a,e,0,0,0,0,1)}static fromYRotation(t){const a=Math.sin(t),e=Math.cos(t);return new U(e,0,-a,0,0,1,0,0,a,0,e,0,0,0,0,1)}static fromZRotation(t){const a=Math.sin(t),e=Math.cos(t);return new U(e,a,0,0,-a,e,0,0,0,0,1,0,0,0,0,1)}static fromScalingVec3(t){if(t.array&&(t=t.array),t instanceof Array)return new U(t[0],0,0,0,0,t[1],0,0,0,0,t[2],0,0,0,0,1)}static fromTranslatingVec3(t){if(t.array&&(t=t.array),t instanceof Array)return new U(1,0,0,0,0,1,0,0,0,0,1,0,t[0],t[1],t[2],1)}static fromQuat(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=4){const[a,e,i,s]=t,[r,h,n]=t.map(t=>2*t),o=a*r,u=e*r,y=e*h,l=i*r,c=i*h,w=i*n,x=s*r,d=s*h,z=s*n;return new U(1-y-w,u+z,l-d,0,u-z,1-o-w,c+x,0,l+d,c-x,1-o-y,0,0,0,0,1)}}static fromRotationTranslationScale(t,a,e){if(t.array&&(t=t.array),a.array&&(a=a.array),e.array&&(e=e.array),t.length&&t.length>=4&&a.length&&a.length>=3&&e.length&&e.length>=3){const i=t[0]+t[0],s=t[1]+t[1],r=t[2]+t[2],h=t[0]*i,n=t[0]*s,o=t[0]*r,u=t[1]*s,y=t[1]*r,l=t[2]*r,c=t[3]*i,w=t[3]*s,x=t[3]*r,d=e[0],z=e[1],b=e[2];return new U((1-(u+l))*d,(n+x)*d,(o-w)*d,0,(n-x)*z,(1-(h+l))*z,(y+c)*z,0,(o+w)*b,(y-c)*b,(1-(h+u))*b,0,a[0],a[1],a[2],1)}}static fromRotationTranslationScaleOrigin(t,a,e,i){if(t.array&&(t=t.array),a.array&&(a=a.array),e.array&&(e=e.array),i.array&&(i=i.array),t.length&&t.length>=4&&a.length&&a.length>=3&&e.length&&e.length>=3&&i.length&&i.length>=3){const s=t[0]+t[0],r=t[1]+t[1],h=t[2]+t[2],n=t[0]*s,o=t[0]*r,u=t[0]*h,y=t[1]*r,l=t[1]*h,c=t[2]*h,w=t[3]*s,x=t[3]*r,d=t[3]*h,z=e[0],b=e[1],f=e[2],p=i[0],m=i[1],g=i[2],N=(1-(y+c))*z,M=(o+d)*z,v=(u-x)*z,S=(o-d)*b,T=(1-(n+c))*b,E=(l+w)*b,j=(u+x)*f,O=(l-w)*f,P=(1-(n+y))*f;return new U(N,M,v,0,S,T,E,0,j,O,P,0,a[0]+p-(N*p+S*m+j*g),a[1]+m-(M*p+T*m+O*g),a[2]+g-(v*p+E*m+P*g),1)}}static frustum(t,a,e,i,s,r){const h=1/(a-t),n=1/(i-e),o=1/(s-r);return new U(2*s*h,0,0,0,0,2*s*n,0,0,(a+t)*h,(i+e)*n,(r+s)*o,-1,0,0,r*s*2*o,0)}static perspective(t,a,e,i){const s=1/Math.tan(t/2);let r,h,n;return null!=i&&Infinity!==i?(r=1/(e-i),h=(i+e)*r,n=2*i*e*r):(h=-1,n=-2*e),new U(s/a,0,0,0,0,s,0,0,0,0,h,-1,0,0,n,0)}static ortho(t,a,e,i,s,r){const h=1/(t-a),n=1/(e-i),o=1/(s-r);return new U(-2*h,0,0,0,0,-2*n,0,0,0,0,2*o,0,(t+a)*h,(i+e)*n,(r+s)*o,1)}static lookAt(t,a,e){if(t.array&&(t=t.array),a.array&&(a=a.array),e.array&&(e=e.array),t.length&&t.length>=3&&a.length&&a.length>=3&&e.length&&e.length>=3){const i=new l(...t),s=new l(...a),r=new l(...e);if(Math.abs(i.x-s.x)<1e-4&&Math.abs(i.y-s.y)<1e-4&&Math.abs(i.z-s.z)<1e-4)return new U;const h=i.subtractNew(s);let n=1/Math.hypot(h.x,h.y,h.z);h.x*=n,h.y*=n,h.z*=n;const o=new l(r.y*h.z-r.z*h.y,r.z*h.x-r.x*h.z,r.x*h.y-r.y*h.x);n=Math.hypot(o.x,o.y,o.z),n?(n=1/n,o.x*=n,o.y*=n,o.z*=n):o.reset(0,0,0);const u=new l(h.y*o.z-h.z*o.y,h.z*o.x-h.x*o.z,h.x*o.y-h.y*o.x);return n=Math.hypot(u.x,u.y,u.z),n?(n=1/n,u.x*=n,u.y*=n,u.z*=n):u.reset(0,0,0),new U(o.x,u.x,h.x,0,o.y,u.y,h.y,0,o.z,u.z,h.z,0,-(o.x*i.x+o.y*i.y+o.z*i.z),-(u.x*i.x+u.y*i.y+u.z*i.z),-(h.x*i.x+h.y*i.y+h.z*i.z),1)}}static targetTo(t,a,e){if(t.array&&(t=t.array),a.array&&(a=a.array),e.array&&(e=e.array),t.length&&t.length>=3&&a.length&&a.length>=3&&e.length&&e.length>=3){const i=new l(...t),s=new l(...a),r=new l(...e),h=i.subtractNew(s);let n=h.lengthSquared;n>0?(n=1/Math.sqrt(n),h.x*=n,h.y*=n,h.z*=n):h.z=1;const o=new l(r.y*h.z-r.z*h.y,r.z*h.x-r.x*h.z,r.x*h.y-r.y*h.x);return n=o.lengthSquared,0===n&&(r.z?r.x+=1e-6:r.y?r.z+=1e-6:r.y+=1e-6,o.reset(r.y*h.z-r.z*h.y,r.z*h.x-r.x*h.z,r.x*h.y-r.y*h.x),n=o.lengthSquared),n=1/Math.sqrt(n),o.x*=n,o.y*=n,o.z*=n,new U(o.x,o.y,o.z,0,h.y*o.z-h.z*o.y,h.z*o.x-h.x*o.z,h.x*o.y-h.y*o.x,0,h.x,h.y,h.z,0,i.x,i.y,i.z,1)}}}export{p as Mat2,B as Mat3,U as Mat4,q as Quat,n as Vec2,l as Vec3,c as Vec4};
//# sourceMappingURL=index.modern.js.map
