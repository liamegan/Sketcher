!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t=t||self).wtcMath={})}(this,function(t){function i(t,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&i(t.prototype,n),a&&i(t,a),t}function a(t,i){return(a=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function r(t,i,n){return(r=e()?Reflect.construct:function(t,i,n){var e=[null];e.push.apply(e,i);var r=new(Function.bind.apply(t,e));return n&&a(r,n.prototype),r}).apply(null,arguments)}var s=0;function h(t){return"__private_"+s+++"_"+t}function o(t,i){if(!Object.prototype.hasOwnProperty.call(t,i))throw new TypeError("attempted to use private field on non-instance");return t}var u=180/Math.PI,c=function(t){return t/u},y=h("x"),f=h("y"),l=function(){function t(){Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),o(this,y)[y]=0,o(this,f)[f]=0,this.reset.apply(this,[].slice.call(arguments))}var i=t.prototype;return i.reset=function(){var t=[].slice.call(arguments),i=t[0],n=t[1];return isNaN(i)&&(i=0),isNaN(n)&&(n=0),this.x=i,this.y=n,this},i.resetToVector=function(t){return this.x=t.x,this.y=t.y,this},i.clone=function(){return new t(this.x,this.y)},i.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.addNew=function(t){return this.clone().add(t)},i.addScalar=function(i){return this.add(new t(i,i))},i.addScalarNew=function(t){return this.clone().addScalar(t)},i.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},i.subtractNew=function(t){return this.clone().subtract(t)},i.subtractScalar=function(i){return this.subtract(new t(i,i))},i.subtractScalarNew=function(t){return this.clone().subtractScalar(t)},i.divide=function(t){return 0!==t.x?this.x/=t.x:this.x=0,0!==t.y?this.y/=t.y:this.y=0,this},i.divideNew=function(t){return this.clone().divide(t)},i.divideScalar=function(i){var n=new t(i,i);return this.divide(n)},i.divideScalarNew=function(t){return this.clone().divideScalar(t)},i.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},i.multiplyNew=function(t){return this.clone().multiply(t)},i.multiplyScalar=function(i){var n=new t(i,i);return this.multiply(n)},i.multiplyScalarNew=function(t){return this.clone().multiplyScalar(t)},i.scale=function(t){return this.multiplyScalar(t)},i.scaleNew=function(t){return this.multiplyScalarNew(t)},i.rotate=function(t){var i=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=i,this.y=n,this},i.rotateNew=function(t){return this.clone().rotate(t)},i.rotateDeg=function(t){return this.rotate(c(t))},i.rotateDegNew=function(t){return this.rotateNew(c(t))},i.rotateBy=function(t){return this.rotate(t)},i.rotateByNew=function(t){return this.rotateNew(t)},i.rotateDegBy=function(t){return this.rotateDeg(t)},i.rotateDegByNew=function(t){return this.rotateDegNew(t)},i.rotateTo=function(t){return this.rotate(t-this.angle)},i.rotateToNew=function(t){return this.clone().rotateTo(t)},i.rotateToDeg=function(t){return this.rotateTo(c(t))},i.rotateToDegNew=function(t){return this.rotateToNew(c(t))},i.negate=function(){return this.multiplyScalar(-1)},i.negateNew=function(){return this.multiplyScalarNew(-1)},i.inverse=function(){return this.x=1/this.x,this.y=1/this.y,this},i.inverseNew=function(){var t=this.clone();return t.x=1/t.x,t.y=1/t.y,t},i.normalise=function(){return this.divideScalar(this.length)},i.normaliseNew=function(){return this.divideScalarNew(this.length)},i.distance=function(t){return this.subtractNew(t).length},i.distanceX=function(t){return this.x-t.x},i.distanceY=function(t){return this.y-t.y},i.dot=function(t){return this.x*t.x+this.y*t.y},i.det=function(t){return this.x*t.y+this.y*t.x},i.slopeBetween=function(t){return(t.y-this.y)/(t.x-this.x)},i.cross=function(t){return this.x*t.x-this.y*t.y},i.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},i.ceilNew=function(){return this.clone().ceil()},i.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},i.floorNew=function(){return this.clone().floor()},i.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},i.roundNew=function(){return this.clone().round()},i.mod=function(t){return this.x=this.x%t.x,this.y=this.y%t.y,this},i.modNew=function(t){return this.clone().mod(t)},i.fract=function(){return this.x-=Math.floor(this.x),this.y-=Math.floor(this.y),this},i.fractNew=function(){return this.clone().fract()},i.transformByMat2=function(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=4){var i=this.clone();this.x=t[0]*i.x+t[2]*i.y,this.y=t[1]*i.x+t[3]*i.y}return this},i.transformByMat2New=function(t){return this.clone().transformByMat2(t)},i.transformByMat3=function(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=9){var i=this.clone();this.x=t[0]*i.x+t[3]*i.y+t[6],this.y=t[1]*i.x+t[4]*i.y+t[7]}return this},i.transformByMat3New=function(t){return this.clone().transformByMat3(t)},t.interpolate=function(i){if(i instanceof t)return new t(i.x,i.y);if(i instanceof Array&&i.length>=2)return new t(i[0],i[1]);if(!isNaN(i))return new t(i,i);if("string"!=typeof i)throw new Error("The passed interpolant could not be parsed into a vec2");var n=i.split(","),a=Number(n[0]),e=Number(n[1]);return n.length>=2&&!isNaN(a)&&!isNaN(e)?new t(a,e):void 0},t.lerp=function(i,n,a){return new t(i.x+a*(n.x-i.x),i.y+a*(n.y-i.y))},t.getAngle=function(t,i){t=t.clone(),i=i.clone(),t.normalise(),i.normalise();var n=t.dot(i);return n>1?0:n<-1?Math.PI:Math.acos(n)},n(t,[{key:"x",get:function(){return o(this,y)[y]||0},set:function(t){if("number"!=typeof t)throw new TypeError("X should be a number");o(this,y)[y]=t}},{key:"y",get:function(){return o(this,f)[f]||0},set:function(t){if("number"!=typeof t)throw new TypeError("Y should be a number");o(this,f)[f]=t}},{key:"lengthSquared",get:function(){return this.x*this.x+this.y*this.y},set:function(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.lengthSquared)}},{key:"length",get:function(){return Math.sqrt(this.lengthSquared)},set:function(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.length)}},{key:"angle",get:function(){return Math.atan2(this.y,this.x)},set:function(t){if("number"!=typeof t)throw new TypeError("angle should be a number");this.rotateTo(t)}},{key:"angleInDegrees",get:function(){return Math.atan2(this.y,this.x)*u},set:function(t){if("number"!=typeof t)throw new TypeError("angle should be a number");this.rotateToDeg(t)}},{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"area",get:function(){return this.x*this.y}},{key:"slope",get:function(){return this.y/this.x},set:function(t){if(!isNaN(t)){var i=Math.atan(t);this.angle=i}}},{key:"array",get:function(){return[this.x,this.y]}},{key:"xy",get:function(){return new t(this.x,this.y)},set:function(i){if(i instanceof t)this.resetToVector(i);else{if(!(i instanceof Array&&i.length>=2))throw new Error("input should be of type Vector");this.reset(i[0],i[1])}}},{key:"yx",get:function(){return new t(this.y,this.x)},set:function(i){this.xy=t.interpolate(i).yx}},{key:"xx",get:function(){return new t(this.x,this.x)},set:function(i){i=t.interpolate(i),this.x=i.y}},{key:"yy",get:function(){return new t(this.y,this.y)},set:function(i){i=t.interpolate(i),this.y=i.y}}]),t}(),w=h("x"),x=h("y"),d=h("z"),p=function(){function t(){Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),o(this,w)[w]=0,o(this,x)[x]=0,o(this,d)[d]=0,this.reset.apply(this,[].slice.call(arguments))}var i=t.prototype;return i.reset=function(){var t=[].slice.call(arguments),i=t[0],n=t[1],a=t[2];return isNaN(i)&&(i=0),isNaN(n)&&(n=0),isNaN(a)&&(a=0),this.x=i,this.y=n,this.z=a,this},i.resetToVector=function(i){return i instanceof t&&(this.x=i.x,this.y=i.y,this.z=i.z),this},i.clone=function(){return new t(this.x,this.y,this.z)},i.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},i.addNew=function(t){return this.clone().add(t)},i.addScalar=function(i){return this.add(new t(i,i,i))},i.addScalarNew=function(t){return this.clone().addScalar(t)},i.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},i.subtractNew=function(t){return this.clone().subtract(t)},i.subtractScalar=function(i){return this.subtract(new t(i,i,i))},i.subtractScalarNew=function(t){return this.clone().subtractScalar(t)},i.divide=function(t){return 0!==t.x?this.x/=t.x:this.x=0,0!==t.y?this.y/=t.y:this.y=0,0!==t.z?this.z/=t.z:this.z=0,this},i.divideNew=function(t){return this.clone().divide(t)},i.divideScalar=function(i){var n=new t(i,i,i);return this.divide(n)},i.divideScalarNew=function(t){return this.clone().divideScalar(t)},i.multiply=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},i.multiplyNew=function(t){return this.clone().multiply(t)},i.multiplyScalar=function(i){var n=new t(i,i,i);return this.multiply(n)},i.multiplyScalarNew=function(t){return this.clone().multiplyScalar(t)},i.scale=function(t){return this.multiplyScalar(t)},i.scaleNew=function(t){return this.multiplyScalarNew(t)},i.rotateX=function(t,i){var n=Math.sin(i),a=Math.cos(i),e=this.subtractNew(t).clone();return e.y=e.y*a-e.z*n,e.z=e.y*n+e.z*a,this.y=e.y+t.y,this.z=e.z+t.z,this},i.rotateXNew=function(t,i){return this.clone().rotateX(t,i)},i.rotateY=function(t,i){var n=Math.sin(i),a=Math.cos(i),e=this.subtractNew(t).clone();return e.x=e.z*n+e.z*a,e.z=e.z*a-e.x*n,this.x=e.x+t.x,this.z=e.z+t.z,this},i.rotateyNew=function(t,i){return this.clone().rotateY(t,i)},i.rotateZ=function(t,i){var n=Math.sin(i),a=Math.cos(i),e=this.subtractNew(t).clone();return e.x=e.x*a-e.y*n,e.y=e.x*n+e.y*a,this.x=e.x+t.x,this.y=e.y+t.y,this},i.rotateZNew=function(t,i){return this.clone().rotateZ(t,i)},i.transformByMat4=function(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=16){var i=this.clone(),n=t[3]*i.x+t[7]*i.y+t[11]*i.z+t[15]||1;this.x=(t[0]*i.x+t[4]*i.y+t[8]*i.z+t[12])/n,this.y=(t[1]*i.x+t[5]*i.y+t[9]*i.z+t[13])/n,this.z=(t[2]*i.x+t[6]*i.y+t[10]*i.z+t[14])/n}return this},i.transformByMat4New=function(t){return this.clone().transformByMat4(t)},i.transformByMat3=function(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=9){var i=this.clone();this.x=t[0]*i.x+t[3]*i.y+t[6]*i.z,this.y=t[1]*i.x+t[4]*i.y+t[7]*i.z,this.z=t[2]*i.x+t[5]*i.y+t[8]*i.z}return this},i.transformByMat3New=function(t){return this.clone().transformByMat3(t)},i.transformByQuat=function(i){if(i.array&&(i=i.array),i instanceof Array&&i.length>=4){var n=this.clone(),a=new t(i[1]*n.z-i[2]*n.y,i[2]*n.x-i[0]*n.z,i[0]*n.y-i[1]*n.x),e=new t(i[1]*a.z-i[2]*a.y,i[2]*a.x-i[0]*a.z,i[0]*a.y-i[1]*a.x);a.scale(2*i[3]),e.scale(2*i[3]),this.add(a),this.add(e)}return this},i.transformByQuatNew=function(t){return this.clone().transformByQuat(t)},i.negate=function(){return this.multiplyScalar(-1)},i.negateNew=function(){return this.multiplyScalarNew(-1)},i.inverse=function(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this},i.inverseNew=function(){var t=this.clone();return t.x=1/t.x,t.y=1/t.y,t.z=1/t.z,t},i.normalise=function(){return this.divideScalar(this.length)},i.normaliseNew=function(){return this.divideScalarNew(this.length)},i.distance=function(t){return this.subtractNew(t).length},i.distanceX=function(t){return this.x-t.x},i.distanceY=function(t){return this.y-t.y},i.distanceZ=function(t){return this.z-t.z},i.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},i.cross=function(i){return new t(this.y*i.z-this.z*i.y,this.z*i.x-this.x*i.z,this.x*i.y-this.y*i.x)},i.crossNew=function(t){return this.clone().cross(t)},i.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},i.ceilNew=function(){return this.clone().ceil()},i.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},i.floorNew=function(){return this.clone().floor()},i.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},i.roundNew=function(){return this.clone().round()},i.fract=function(){return this.x-=Math.floor(this.x),this.y-=Math.floor(this.y),this.z-=Math.floor(this.z),this},i.fractNew=function(){return this.clone().fract()},t.interpolate=function(i){if(i instanceof t)return new t(i.x,i.y,i.z);if(i instanceof Array&&i.length>=3)return new t(i[0],i[1],i[2]);if(!isNaN(i))return new t(i,i,i);if("string"!=typeof i)throw new Error("The passed interpolant could not be parsed into a Vec3");var n=i.split(","),a=Number(n[0]),e=Number(n[1]),r=Number(n[2]);return n.length>=3&&!isNaN(a)&&!isNaN(e)&&!isNaN(r)?new t(a,e,r):void 0},t.lerp=function(i,n,a){return new t(i.x+a*(n.x-i.x),i.y+a*(n.y-i.y),i.z+a*(n.z-i.z))},t.getAngle=function(t,i){var n=t.xy,a=i.xy,e=n.lengthSquared;e>0&&(e=1/Math.sqrt(e));var r=a.lengthSquared;r>0&&(r=1/Math.sqrt(r));var s=(n.x*a.x+n.y*a.y)*e*r;return s>1?0:s<-1?Math.PI:Math.acos(s)},t.fromRotationMatrix=function(i,n){if(void 0===n&&(n="YXZ"),i.array&&(i=i.array),i instanceof Array&&i.length>=16){var a=new t;return"XYZ"===n?(a.y=Math.asin(Math.min(Math.max(i[8],-1),1)),Math.abs(i[8])<.99999?(a.x=Math.atan2(-i[9],i[10]),a.z=Math.atan2(-i[4],i[0])):(a.x=Math.atan2(i[6],i[5]),a.z=0)):"YXZ"===n?(a.x=Math.asin(-Math.min(Math.max(i[9],-1),1)),Math.abs(i[9])<.99999?(a.y=Math.atan2(i[8],i[10]),a.z=Math.atan2(i[1],i[5])):(a.y=Math.atan2(-i[2],i[0]),a.z=0)):"ZXY"===n?(a.x=Math.asin(Math.min(Math.max(i[6],-1),1)),Math.abs(i[6])<.99999?(a.y=Math.atan2(-i[2],i[10]),a.z=Math.atan2(-i[4],i[5])):(a.y=0,a.z=Math.atan2(i[1],i[0]))):"ZYX"===n?(a.y=Math.asin(-Math.min(Math.max(i[2],-1),1)),Math.abs(i[2])<.99999?(a.x=Math.atan2(i[6],i[10]),a.z=Math.atan2(i[1],i[0])):(a.x=0,a.z=Math.atan2(-i[4],i[5]))):"YZX"===n?(a.z=Math.asin(Math.min(Math.max(i[1],-1),1)),Math.abs(i[1])<.99999?(a.x=Math.atan2(-i[9],i[5]),a.y=Math.atan2(-i[2],i[0])):(a.x=0,a.y=Math.atan2(i[8],i[10]))):"XZY"===n&&(a.z=Math.asin(-Math.min(Math.max(i[4],-1),1)),Math.abs(i[4])<.99999?(a.x=Math.atan2(i[6],i[5]),a.y=Math.atan2(i[8],i[0])):(a.x=Math.atan2(-i[9],i[10]),a.y=0)),a}},n(t,[{key:"x",get:function(){return o(this,w)[w]||0},set:function(t){if("number"!=typeof t)throw new TypeError("X should be a number");o(this,w)[w]=t}},{key:"y",get:function(){return o(this,x)[x]||0},set:function(t){if("number"!=typeof t)throw new TypeError("Y should be a number");o(this,x)[x]=t}},{key:"z",get:function(){return o(this,d)[d]||0},set:function(t){if("number"!=typeof t)throw new TypeError("Y should be a number");o(this,d)[d]=t}},{key:"lengthSquared",get:function(){return this.x*this.x+this.y*this.y+this.z*this.z},set:function(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.lengthSquared)}},{key:"length",get:function(){return Math.sqrt(this.lengthSquared)},set:function(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.length)}},{key:"radius",get:function(){return this.x},set:function(t){this.x=t}},{key:"phi",get:function(){return this.y},set:function(t){this.y=t}},{key:"theta",get:function(){return this.z},set:function(t){this.z=t}},{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"depth",get:function(){return this.z},set:function(t){this.z=t}},{key:"area",get:function(){return this.x*this.y*this.z}},{key:"array",get:function(){return[this.x,this.y,this.z]}},{key:"xyz",get:function(){return new t(this.x,this.y,this.z)},set:function(i){if(i instanceof t)this.resetToVector(i);else{if(!(i instanceof Array&&i.length>=3))throw new Error("input should be of type Vector");this.reset(i[0],i[1],i[2])}}},{key:"yzx",get:function(){return new t(this.y,this.z,this.x)},set:function(i){this.xyz=t.interpolate(i).yzx}},{key:"zxy",get:function(){return new t(this.z,this.x,this.y)},set:function(i){this.xyz=t.interpolate(i).zxy}},{key:"xy",get:function(){return new l(this.x,this.y)},set:function(t){t=l.interpolate(t),this.x=t.x,this.y=t.y}},{key:"yz",get:function(){return new l(this.y,this.z)},set:function(t){t=l.interpolate(t),this.y=t.x,this.z=t.y}},{key:"zx",get:function(){return new l(this.z,this.x)},set:function(t){t=l.interpolate(t),this.z=t.x,this.x=t.y}},{key:"yx",get:function(){return new l(this.y,this.x)},set:function(t){t=l.interpolate(t),this.x=t.y,this.y=t.x}},{key:"zy",get:function(){return new l(this.z,this.y)},set:function(t){t=l.interpolate(t),this.z=t.y,this.y=t.x}},{key:"xx",get:function(){return new l(this.x,this.x)},set:function(t){t=l.interpolate(t),this.x=t.y}},{key:"yy",get:function(){return new l(this.y,this.y)},set:function(t){t=l.interpolate(t),this.y=t.y}},{key:"zz",get:function(){return new l(this.z,this.z)},set:function(t){t=l.interpolate(t),this.z=t.y}}]),t}(),b=function(){function t(){this._x=0,this._y=0,this._z=0,this._w=0,this.reset.apply(this,[].slice.call(arguments))}var i=t.prototype;return i.reset=function(){var t=[].slice.call(arguments),i=t[0],n=t[1],a=t[2],e=t[3];return isNaN(i)&&(i=0),isNaN(n)&&(n=0),isNaN(a)&&(a=0),isNaN(e)&&(e=0),this.x=i,this.y=n,this.z=a,this.w=e,this},i.resetToVector=function(i){return i instanceof t&&(this.x=i.x,this.y=i.y,this.z=i.z,this.w=i.w),this},i.clone=function(){return new t(this.x,this.y,this.z,this.w)},i.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},i.addNew=function(t){return this.clone().add(t)},i.addScalar=function(i){return this.add(new t(i,i,i,i))},i.addScalarNew=function(t){return this.clone().addScalar(t)},i.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},i.subtractNew=function(t){return this.clone().subtract(t)},i.subtractScalar=function(i){return this.subtract(new t(i,i,i,i))},i.subtractScalarNew=function(t){return this.clone().subtractScalar(t)},i.divide=function(t){return 0!==t.x?this.x/=t.x:this.x=0,0!==t.y?this.y/=t.y:this.y=0,0!==t.z?this.z/=t.z:this.z=0,0!==t.w?this.w/=t.w:this.w=0,this},i.divideNew=function(t){return this.clone().divide(t)},i.divideScalar=function(i){var n=new t(i,i,i,i);return this.divide(n)},i.divideScalarNew=function(t){return this.clone().divideScalar(t)},i.multiply=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},i.multiplyNew=function(t){return this.clone().multiply(t)},i.multiplyScalar=function(i){var n=new t(i,i,i,i);return this.multiply(n)},i.multiplyScalarNew=function(t){return this.clone().multiplyScalar(t)},i.scale=function(t){return this.multiplyScalar(t)},i.scaleNew=function(t){return this.multiplyScalarNew(t)},i.rotateX=function(t,i){var n=Math.sin(i),a=Math.cos(i),e=this.subtractNew(t).clone();return e.y=e.y*a-e.z*n,e.z=e.y*n+e.z*a,this.y=e.y+t.y,this.z=e.z+t.z,this},i.rotateXNew=function(t,i){return this.clone().rotateX(t,i)},i.rotateY=function(t,i){var n=Math.sin(i),a=Math.cos(i),e=this.subtractNew(t).clone();return e.x=e.z*n+e.z*a,e.z=e.z*a-e.x*n,this.x=e.x+t.x,this.z=e.z+t.z,this},i.rotateYNew=function(t,i){return this.clone().rotateY(t,i)},i.rotateZ=function(t,i){var n=Math.sin(i),a=Math.cos(i),e=this.subtractNew(t).clone();return e.x=e.x*a-e.y*n,e.y=e.x*n+e.y*a,this.x=e.x+t.x,this.y=e.y+t.y,this},i.rotateZNew=function(t,i){return this.clone().rotateZ(t,i)},i.transformByMat4=function(t){if(t.array&&(t=t.array),t instanceof Array&&t.length>=16){var i=this.clone();this.x=(t[0]*i.x+t[4]*i.y+t[8]*i.z+t[12])/this.w,this.y=(t[1]*i.x+t[5]*i.y+t[9]*i.z+t[13])/this.w,this.z=(t[2]*i.x+t[6]*i.y+t[10]*i.z+t[14])/this.w,this.w=(t[3]*i.x+t[7]*i.y+t[11]*i.z+t[15])/this.w}return this},i.transformByMat4New=function(t){return this.clone().transformByMat4(t)},i.transformByQuat=function(i){if(i.array&&(i=i.array),i instanceof Array&&i.length>=4){var n=new t(i[3]*this.x+i[1]*this.z-i[2]*this.y,i[3]*this.y+i[2]*this.x-i[0]*this.z,i[3]*this.z+i[0]*this.y-i[1]*this.x,-i[0]*this.x-i[1]*this.y-i[2]*this.z);this.x=n.x*i[3]+n.w*-i[0]+n.y*-i[2]-n.z*-i[1],this.y=n.y*i[3]+n.w*-i[1]+n.z*-i[0]-n.x*-i[2],this.z=n.z*i[3]+n.w*-i[2]+n.x*-i[1]-n.y*-i[0]}return this},i.transformByQuatNew=function(t){return this.clone().transformByQuat(t)},i.negate=function(){return this.multiplyScalar(-1)},i.negateNew=function(){return this.multiplyScalarNew(-1)},i.inverse=function(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this.w=1/this.w,this},i.inverseNew=function(){var t=this.clone();return t.x=1/t.x,t.y=1/t.y,t.z=1/t.z,t.w=1/t.w,t},i.normalise=function(){var t=this.length;return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):this.divideScalar(t),this},i.normaliseNew=function(){return this.clone().normalise()},i.distance=function(t){return this.subtractNew(t).length},i.distanceX=function(t){return this.x-t.x},i.distanceY=function(t){return this.y-t.y},i.distanceZ=function(t){return this.z-t.z},i.distanceW=function(t){return this.w-t.w},i.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},i.cross=function(i,n){var a=this.clone(),e=i[0]*n[1]-i[1]*n[0],r=i[0]*n[2]-i[2]*n[0],s=i[0]*n[3]-i[3]*n[0],h=i[1]*n[2]-i[2]*n[1],o=i[1]*n[3]-i[3]*n[1],u=i[2]*n[3]-i[3]*n[2],c=a[0],y=a[1],f=a[2],l=a[3];return new t(y*u-f*o+l*h,-c*u+f*s-l*r,c*o-y*s+l*e,-c*h+y*r-f*e)},i.crossNew=function(t,i){return this.clone().cross(t,i)},i.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},i.ceilNew=function(){return this.clone().ceil()},i.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},i.floorNew=function(){return this.clone().floor()},i.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},i.roundNew=function(){return this.clone().round()},i.fract=function(){return this.x-=Math.floor(this.x),this.y-=Math.floor(this.y),this.z-=Math.floor(this.z),this.w-=Math.floor(this.w),this},i.fractNew=function(){return this.clone().fract()},t.interpolate=function(i){if(i instanceof t)return new t(i.x,i.y,i.z,i.w);if(i instanceof Array&&i.length>=4)return new t(i[0],i[1],i[2],i[3]);if(!isNaN(i))return new t(i,i,i,i);if("string"!=typeof i)throw new Error("The passed interpolant could not be parsed into a Vec4");var n=i.split(","),a=Number(n[0]),e=Number(n[1]),r=Number(n[2]),s=Number(n[3]);return!(n.length>=3)||isNaN(a)||isNaN(e)||isNaN(r)||isNaN(s)?void 0:new t(a,e,r,s)},t.lerp=function(i,n,a){return new t(i.x+a*(n.x-i.x),i.y+a*(n.y-i.y),i.z+a*(n.z-i.z),i.w+a*(n.w-i.w))},t.getAngle=function(t,i){var n=t.dot(i);return Math.acos(2*n*n-1)},n(t,[{key:"x",get:function(){return this._x||0},set:function(t){if("number"!=typeof t)throw new TypeError("X should be a number");this._x=t}},{key:"y",get:function(){return this._y||0},set:function(t){if("number"!=typeof t)throw new TypeError("Y should be a number");this._y=t}},{key:"z",get:function(){return this._z||0},set:function(t){if("number"!=typeof t)throw new TypeError("Y should be a number");this._z=t}},{key:"w",get:function(){return this._w||0},set:function(t){if("number"!=typeof t)throw new TypeError("W should be a number");this._w=t}},{key:"lengthSquared",get:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},set:function(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.lengthSquared)}},{key:"length",get:function(){return Math.sqrt(this.lengthSquared)},set:function(t){if("number"!=typeof t)throw new TypeError("length should be a number");this.multiplyScalar(t/this.length)}},{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"depth",get:function(){return this.z},set:function(t){this.z=t}},{key:"area",get:function(){return this.x*this.y*this.z*this.w}},{key:"array",get:function(){return[this.x,this.y,this.z,this.w]}},{key:"xyzw",get:function(){return new t(this.x,this.y,this.z,this.w)},set:function(i){if(i instanceof t)this.resetToVector(i);else{if(!(i instanceof Array&&i.length>=4))throw new Error("input should be of type Vector");this.reset(i[0],i[1],i[2],i[3])}}},{key:"yzwx",get:function(){return new t(this.y,this.z,this.w,this.x)},set:function(i){this.xyzw=t.interpolate(i).yzwx}},{key:"zwxy",get:function(){return new t(this.z,this.w,this.x,this.y)},set:function(i){this.xyzw=t.interpolate(i).zwxy}},{key:"wxyz",get:function(){return new t(this.w,this.x,this.y,this.z)},set:function(i){this.xyzw=t.interpolate(i).wxyz}},{key:"xyz",get:function(){return new p(this.x,this.y,this.z)},set:function(t){t=p.interpolate(t),this.x=t.x,this.y=t.y,this.z=t.z}},{key:"yzx",get:function(){return new p(this.y,this.z,this.x)},set:function(t){t=p.interpolate(t),this.x=t.y,this.y=t.z,this.z=t.x}},{key:"zxy",get:function(){return new p(this.z,this.x,this.y)},set:function(t){t=p.interpolate(t),this.x=t.z,this.y=t.x,this.z=t.y}},{key:"xx",get:function(){return new l(this.x,this.x)},set:function(t){t=l.interpolate(t),this.x=t.y}},{key:"xy",get:function(){return new l(this.x,this.y)},set:function(t){t=l.interpolate(t),this.x=t.x,this.y=t.y}},{key:"xz",get:function(){return new l(this.x,this.z)},set:function(t){t=l.interpolate(t),this.x=t.x,this.z=t.y}},{key:"xw",get:function(){return new l(this.x,this.w)},set:function(t){t=l.interpolate(t),this.x=t.x,this.z=t.y}},{key:"yx",get:function(){return new l(this.y,this.x)},set:function(t){t=l.interpolate(t),this.x=t.y,this.y=t.x}},{key:"yy",get:function(){return new l(this.y,this.y)},set:function(t){t=l.interpolate(t),this.y=t.y}},{key:"yz",get:function(){return new l(this.y,this.z)},set:function(t){t=l.interpolate(t),this.y=t.x,this.z=t.y}},{key:"yw",get:function(){return new l(this.y,this.w)},set:function(t){t=l.interpolate(t),this.y=t.x,this.w=t.y}},{key:"zx",get:function(){return new l(this.z,this.x)},set:function(t){t=l.interpolate(t),this.z=t.x,this.x=t.y}},{key:"zy",get:function(){return new l(this.z,this.y)},set:function(t){t=l.interpolate(t),this.z=t.y,this.y=t.x}},{key:"zz",get:function(){return new l(this.z,this.z)},set:function(t){t=l.interpolate(t),this.z=t.y}},{key:"zw",get:function(){return new l(this.z,this.w)},set:function(t){t=l.interpolate(t),this.z=t.x,this.w=t.y}},{key:"wx",get:function(){return new l(this.w,this.x)},set:function(t){t=l.interpolate(t),this.w=t.x,this.x=t.y}},{key:"wy",get:function(){return new l(this.w,this.y)},set:function(t){t=l.interpolate(t),this.w=t.x,this.y=t.y}},{key:"wz",get:function(){return new l(this.w,this.z)},set:function(t){t=l.interpolate(t),this.w=t.x,this.z=t.y}},{key:"ww",get:function(){return new l(this.w,this.w)},set:function(t){t=l.interpolate(t),this.w=t.y}}]),t}(),z=[1,0,0,1],m=function(t,i){return isNaN(t)?z[function(t){return["a11","a12","a21","a22"].indexOf(t)}(i)]:Number(t)},g=h("a11"),v=h("a12"),N=h("a21"),M=h("a22"),k=function(){function t(){Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),o(this,g)[g]=0,o(this,v)[v]=0,o(this,N)[N]=0,o(this,M)[M]=0;var t=[].slice.call(arguments),i=t[0],n=t[1],a=t[2],e=t[3];this.reset(i,n,a,e)}var i=t.prototype;return i.reset=function(t,i,n,a){return this.a11=m(t,"a11"),this.a12=m(i,"a12"),this.a21=m(n,"a21"),this.a22=m(a,"a22"),this},i.resetToMat2=function(t){return this.a11=t.a11,this.a12=t.a12,this.a21=t.a21,this.a22=t.a22,this},i.clone=function(){return new t(this.a11,this.a12,this.a21,this.a22)},i.transpose=function(){var t=this.a12;return this.a12=this.a21,this.a21=t,this},i.transposeNew=function(){return this.clone().transpose()},i.add=function(t){return this.a11+=t.a11,this.a12+=t.a12,this.a21+=t.a21,this.a22+=t.a22,this},i.addNew=function(t){return this.clone().add(t)},i.subtract=function(t){return this.a11-=t.a11,this.a12-=t.a12,this.a21-=t.a21,this.a22-=t.a22,this},i.subtractNew=function(t){return this.clone().subtract(t)},i.multiply=function(t){var i=this.clone();return this.a11=i.a11*t.a11+i.a21*t.a12,this.a12=i.a12*t.a11+i.a22*t.a12,this.a21=i.a11*t.a21+i.a21*t.a22,this.a22=i.a12*t.a21+i.a22*t.a22,this},i.multiplyNew=function(t){return this.clone().multiply(t)},i.multiplyScalar=function(t){return this.a11*=t,this.a12*=t,this.a21*=t,this.a22*=t,this},i.multiplyScalarNew=function(t){return this.clone().multiplyScalar(t)},i.scale=function(t){return this.multiplyScalar(t)},i.scaleNew=function(t){return this.multiplyScalarNew(t)},i.scaleByVec2=function(t){return t.array&&(t=t.array),t instanceof Array&&(this.a11*=t[0],this.a12*=t[0],this.a21*=t[1],this.a22*=t[1]),this},i.scaleByVec2New=function(t){return this.clone().scaleByVec2(t)},i.rotate=function(t){var i=this.clone(),n=Math.sin(t),a=Math.cos(t);return this.a11=i.a11*a+i.a21*n,this.a12=i.a12*a+i.a22*n,this.a21=i.a11*-n+i.a21*a,this.a22=i.a12*-n+i.a22*a,this},i.rotateNew=function(t){return this.clone().rotate(t)},i.invert=function(){var t=this.clone(),i=this.determinant;return i&&(this.a11=t.a22*(i=1/i),this.a12=-t.a12*i,this.a21=-t.a21*i,this.a22=t.a11*i),this},i.invertNew=function(){return this.clone().invert()},i.adjoint=function(){var t=this.a11;return this.a11=this.a22,this.a12=-this.a12,this.a21=-this.a21,this.a22=t,this},i.adjointNew=function(){return this.clone().adjoint()},i.toString=function(){return"\n      "+this.a11+", "+this.a12+",\n      "+this.a21+", "+this.a22+"\n    "},t.fromAngle=function(i){var n=Math.sin(i),a=Math.cos(i);return new t(a,-n,n,a)},t.fromScalingVec2=function(i){return i.array&&(i=i.array),i instanceof Array?new t(i[0],0,0,i[1]):t.identity()},t.identity=function(){return r(t,z)},n(t,[{key:"a11",get:function(){return o(this,g)[g]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a11 should be a number");o(this,g)[g]=t}},{key:"a12",get:function(){return o(this,v)[v]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a12 should be a number");o(this,v)[v]=t}},{key:"a21",get:function(){return o(this,N)[N]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a21 should be a number");o(this,N)[N]=t}},{key:"a22",get:function(){return o(this,M)[M]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a22 should be a number");o(this,M)[M]=t}},{key:"determinant",get:function(){return this.a11*this.a21-this.a21*this.a12}},{key:"array",get:function(){return[this.a11,this.a12,this.a21,this.a22]}},{key:"columnArray",get:function(){return[this.a11,this.a21,this.a12,this.a22]}}]),t}(),S=[1,0,0,0,1,0,0,0,1],T=function(t,i){return isNaN(t)?S[function(t){return["a11","a12","a13","a21","a22","a23","a31","a32","a33"].indexOf(t)}(i)]:Number(t)},E=h("a11"),j=h("a12"),O=h("a13"),P=h("a21"),B=h("a22"),A=h("a23"),Y=h("a31"),X=h("a32"),V=h("a33"),q=function(){function t(){Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),Object.defineProperty(this,V,{writable:!0,value:void 0}),o(this,E)[E]=0,o(this,j)[j]=0,o(this,O)[O]=0,o(this,P)[P]=0,o(this,B)[B]=0,o(this,A)[A]=0,o(this,Y)[Y]=0,o(this,X)[X]=0,o(this,V)[V]=0,this.reset.apply(this,[].slice.call(arguments))}var i=t.prototype;return i.reset=function(){var t=[].slice.call(arguments),i=t[0],n=t[1],a=t[2],e=t[3],r=t[4],s=t[5],h=t[6],o=t[7],u=t[8];return this.a11=T(i,"a11"),this.a12=T(n,"a12"),this.a13=T(a,"a13"),this.a21=T(e,"a21"),this.a22=T(r,"a22"),this.a23=T(s,"a23"),this.a31=T(h,"a31"),this.a32=T(o,"a32"),this.a33=T(u,"a33"),this},i.resetToMat3=function(t){return this.a11=t.a11,this.a12=t.a12,this.a13=t.a13,this.a21=t.a21,this.a22=t.a22,this.a23=t.a23,this.a31=t.a31,this.a32=t.a32,this.a33=t.a33,this},i.clone=function(){return new t(this.a11,this.a12,this.a13,this.a21,this.a22,this.a23,this.a31,this.a32,this.a33)},i.transpose=function(){var t=this.a12,i=this.a13,n=this.a23;return this.a12=this.a21,this.a13=this.a31,this.a21=t,this.a23=this.a32,this.a31=i,this.a32=n,this},i.transposeNew=function(){return this.clone().transpose()},i.adjoint=function(){var t=this.clone();return this.a11=t.a22*t.a33-t.a23*t.a32,this.a12=t.a13*t.a32-t.a12*t.a33,this.a13=t.a12*t.a23-t.a13*t.a22,this.a21=t.a23*t.a31-t.a21*t.a33,this.a22=t.a11*t.a33-t.a13*t.a31,this.a23=t.a13*t.a21-t.a11*t.a23,this.a31=t.a21*t.a32-t.a22*t.a31,this.a32=t.a12*t.a31-t.a11*t.a32,this.a33=t.a11*t.a22-t.a12*t.a21,this},i.adjointNew=function(){return this.clone().adjoint()},i.add=function(t){return this.a11+=t.a11,this.a12+=t.a12,this.a13+=t.a13,this.a21+=t.a21,this.a22+=t.a22,this.a23+=t.a23,this.a31+=t.a31,this.a32+=t.a32,this.a33+=t.a33,this},i.addNew=function(t){return this.clone().add(t)},i.subtract=function(t){return this.a11-=t.a11,this.a12-=t.a12,this.a13-=t.a13,this.a21-=t.a21,this.a22-=t.a22,this.a23-=t.a23,this.a31-=t.a31,this.a32-=t.a32,this.a33-=t.a33,this},i.subtractNew=function(t){return this.clone().subtract(t)},i.multiply=function(t){var i=this.clone();return this.a11=t.a11*i.a11+t.a12*i.a21+t.a13*i.a31,this.a12=t.a11*i.a12+t.a12*i.a22+t.a13*i.a32,this.a13=t.a11*i.a13+t.a12*i.a23+t.a13*i.a33,this.a21=t.a21*i.a11+t.a22*i.a21+t.a23*i.a31,this.a22=t.a21*i.a12+t.a22*i.a22+t.a23*i.a32,this.a23=t.a21*i.a13+t.a22*i.a23+t.a23*i.a33,this.a31=t.a31*i.a11+t.a32*i.a21+t.a33*i.a31,this.a32=t.a31*i.a12+t.a32*i.a22+t.a33*i.a32,this.a33=t.a31*i.a13+t.a32*i.a23+t.a33*i.a33,this},i.multiplyNew=function(t){return this.clone().multiply(t)},i.multiplyScalar=function(t){return this.a11*=t,this.a12*=t,this.a13*=t,this.a21*=t,this.a22*=t,this.a23*=t,this.a31*=t,this.a32*=t,this.a33*=t,this},i.multiplyScalarNew=function(t){return this.clone().multiplyScalar(t)},i.scale=function(t){return this.multiplyScalar(t)},i.scaleNew=function(t){return this.multiplyScalarNew(t)},i.scaleByVec2=function(t){return t.array&&(t=t.array),this.a11*=t[0],this.a12*=t[0],this.a13*=t[0],this.a21*=t[1],this.a22*=t[1],this.a23*=t[1],this},i.scaleByVec2New=function(t){return this.clone().scaleByVec2(t)},i.rotate=function(t){var i=this.clone(),n=Math.sin(t),a=Math.cos(t);return this.a11=i.a11*a+i.a21*n,this.a12=i.a12*a+i.a22*n,this.a13=i.a13*a+i.a23*n,this.a21=i.a21*a-i.a11*n,this.a22=i.a22*a-i.a12*n,this.a23=i.a23*a-i.a13*n,this},i.rotateNew=function(t){return this.clone().rotate(t)},i.invert=function(){var t=this.clone(),i=this.determinantFunction,n=i.f,a=n.b11,e=n.b21,r=i.determinant;if(r){var s=1/r;this.a11=n.b01*s,this.a12=(-t.a33*t.a12+t.a13*t.a32)*s,this.a13=(t.a23*t.a12-t.a13*t.a22)*s,this.a21=a*s,this.a22=(t.a33*t.a11-t.a13*t.a31)*s,this.a23=(-t.a23*t.a11+t.a13*t.a21)*s,this.a31=e*s,this.a32=(-t.a32*t.a11+t.a12*t.a31)*s,this.a33=(t.a22*t.a11-t.a12*t.a21)*s}return this},i.invertNew=function(){return this.clone().invert()},i.toString=function(){return"\n      "+this.a11+", "+this.a12+", "+this.a13+",\n      "+this.a21+", "+this.a22+", "+this.a23+",\n      "+this.a31+", "+this.a32+", "+this.a33+"\n    "},t.fromAngle=function(i){var n=Math.sin(i),a=Math.cos(i);return new t(a,-n,0,n,a,0,0,0,0)},t.fromScalingVec2=function(i){return i.array&&(i=i.array),i instanceof Array?new t(i[0],0,0,0,i[1],0,0,0,1):t.identity()},t.fromQuat=function(i){if(i.array&&(i=i.array),i instanceof Array&&i.length>=4){var n=i[0],a=i[1],e=i[2],r=i[3],s=i.map(function(t){return 2*t}),h=s[0],o=s[1],u=s[2],c=n*h,y=a*h,f=a*o,l=e*h,w=e*o,x=e*u,d=r*h,p=r*o,b=r*u;return new t(1-f-x,y-b,l+p,y+b,1-c-x,w-d,l-p,w+d,1-c-f)}},t.fromMat4=function(i){var n=i.determinantFunction,a=n.f,e=a.b02,r=a.b04,s=a.b05,h=a.b06,o=a.b07,u=a.b08,c=a.b09,y=a.b10,f=a.b11,l=n.determinant;if(!l)return null;var w=1/l;return new t((i.a22*f-i.a23*y+i.a24*c)*w,(i.a23*u-i.a21*f-i.a24*o)*w,(i.a21*y-i.a22*u+i.a24*h)*w,(i.a13*y-i.a12*f-i.a14*c)*w,(i.a11*f-i.a13*u+i.a14*o)*w,(i.a12*u-i.a11*y-i.a14*h)*w,(i.a42*s-i.a43*r+i.a44*a.b03)*w,(i.a43*e-i.a41*s-i.a44*a.b01)*w,(i.a41*r-i.a42*e+i.a44*a.b00)*w)},t.fromProjection=function(i,n){return new t(2/i,0,0,0,-2/n,0,-1,1,1)},t.identity=function(){return r(t,S)},n(t,[{key:"a11",get:function(){return o(this,E)[E]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a11 should be a number");o(this,E)[E]=t}},{key:"a12",get:function(){return o(this,j)[j]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a12 should be a number");o(this,j)[j]=t}},{key:"a13",get:function(){return o(this,O)[O]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a13 should be a number");o(this,O)[O]=t}},{key:"a21",get:function(){return o(this,P)[P]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a21 should be a number");o(this,P)[P]=t}},{key:"a22",get:function(){return o(this,B)[B]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a22 should be a number");o(this,B)[B]=t}},{key:"a23",get:function(){return o(this,A)[A]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a23 should be a number");o(this,A)[A]=t}},{key:"a31",get:function(){return o(this,Y)[Y]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a31 should be a number");o(this,Y)[Y]=t}},{key:"a32",get:function(){return o(this,X)[X]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a32 should be a number");o(this,X)[X]=t}},{key:"a33",get:function(){return o(this,V)[V]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a33 should be a number");o(this,V)[V]=t}},{key:"frobeniusnorm",get:function(){return Math.hypot.apply(Math,this.array)}},{key:"array",get:function(){return[this.a11,this.a12,this.a13,this.a21,this.a22,this.a23,this.a31,this.a32,this.a33]}},{key:"columnArray",get:function(){return[this.a11,this.a21,this.a31,this.a12,this.a22,this.a32,this.a13,this.a23,this.a33]}},{key:"determinantFunction",get:function(){var t=this.a33*this.a22-this.a23*this.a32,i=-this.a33*this.a21+this.a23*this.a31,n=this.a32*this.a21-this.a22*this.a31;return{f:{b01:t,b11:i,b21:n},determinant:this.a11*t+this.a12*i+this.a13*n}}},{key:"determinant",get:function(){return this.determinantFunction.determinant}}]),t}(),Z=[0,0,0,1],_=function(t,i){return isNaN(t)?Z[function(t){return["x","y","z","w"].indexOf(t)}(i)]:Number(t)},R=function(t){var i,e;function r(){var i,n,a=[].slice.call(arguments);return(i=n=t.call.apply(t,[this].concat(a))||this).reset.apply(i,a),n}e=t,(i=r).prototype=Object.create(e.prototype),i.prototype.constructor=i,a(i,e);var s=r.prototype;return s.reset=function(){var t=[].slice.call(arguments),i=t[0],n=t[1],a=t[2],e=t[3];return this.x=_(i,"x"),this.y=_(n,"y"),this.z=_(a,"z"),this.w=_(e,"w"),this},s.resetToQuat=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},s.clone=function(){return new r(this.x,this.y,this.z,this.w)},s.toString=function(){return this.x+", "+this.y+", "+this.z+", "+this.w},s.multiply=function(t){var i=this.clone();return this.x=i.x*t.w+i.w*t.x+i.y*t.z-i.z*t.y,this.y=i.y*t.w+i.w*t.y+i.z*t.x-i.x*t.z,this.z=i.z*t.w+i.w*t.z+i.x*t.y-i.y*t.x,this.w=i.w*t.w-i.x*t.x-i.y*t.y-i.z*t.z,this},s.multiplyNew=function(t){return this.clone().multiply(t)},s.rotateX=function(t,i){i*=.5;var n=this.clone(),a=Math.sin(i),e=Math.cos(i);return this.x=n.x*e+n.w*a,this.y=n.y*e+n.z*a,this.z=n.z*e-n.y*a,this.w=n.w*e-n.x*a,this},s.rotateY=function(t,i){i*=.5;var n=this.clone(),a=Math.sin(i),e=Math.cos(i);return this.x=n.x*e-n.z*a,this.y=n.y*e+n.w*a,this.z=n.z*e+n.x*a,this.w=n.w*e-n.y*a,this},s.rotateZ=function(t,i){i*=.5;var n=this.clone(),a=Math.sin(i),e=Math.cos(i);return this.x=n.x*e+n.y*a,this.y=n.y*e-n.x*a,this.z=n.z*e+n.w*a,this.w=n.w*e-n.z*a,this},r.fromAxisAngle=function(t,i){t=p.interpolate(t),i*=.5;var n=Math.sin(i);return new r(n*t.x,n*t.y,n*t.z,Math.cos(i))},r.fromEuler=function(t,i){if(void 0===i&&(i="YXZ"),t.array&&(t=t.array),t instanceof Array&&t.length>=3){var n=new r,a=Math.sin(.5*t[0]),e=Math.cos(.5*t[0]),s=Math.sin(.5*t[1]),h=Math.cos(.5*t[1]),o=Math.sin(.5*t[2]),u=Math.cos(.5*t[2]);return"XYZ"===i?(n.x=a*h*u+e*s*o,n.y=e*s*u-a*h*o,n.z=e*h*o+a*s*u,n.w=e*h*u-a*s*o):"YXZ"===i?(n.x=a*h*u+e*s*o,n.y=e*s*u-a*h*o,n.z=e*h*o-a*s*u,n.w=e*h*u+a*s*o):"ZXY"===i?(n.x=a*h*u-e*s*o,n.y=e*s*u+a*h*o,n.z=e*h*o+a*s*u,n.w=e*h*u-a*s*o):"ZYX"===i?(n.x=a*h*u-e*s*o,n.y=e*s*u+a*h*o,n.z=e*h*o-a*s*u,n.w=e*h*u+a*s*o):"YZX"===i?(n.x=a*h*u+e*s*o,n.y=e*s*u+a*h*o,n.z=e*h*o-a*s*u,n.w=e*h*u-a*s*o):"XZY"===i&&(n.x=a*h*u-e*s*o,n.y=e*s*u-a*h*o,n.z=e*h*o+a*s*u,n.w=e*h*u+a*s*o),n}},n(r,[{key:"normalW",get:function(){return Math.sqrt(Math.abs(1-this.x*this.x-this.y*this.y-this.z*this.z))}}]),r}(b),D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Q=function(t,i){return isNaN(t)?D[function(t){return["a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44"].indexOf(t)}(i)]:Number(t)},F=h("a11"),I=h("a12"),W=h("a13"),C=h("a14"),G=h("a21"),H=h("a22"),J=h("a23"),K=h("a24"),L=h("a31"),U=h("a32"),$=h("a33"),tt=h("a34"),it=h("a41"),nt=h("a42"),at=h("a43"),et=h("a44"),rt=function(){function t(){Object.defineProperty(this,F,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:void 0}),Object.defineProperty(this,it,{writable:!0,value:void 0}),Object.defineProperty(this,nt,{writable:!0,value:void 0}),Object.defineProperty(this,at,{writable:!0,value:void 0}),Object.defineProperty(this,et,{writable:!0,value:void 0}),o(this,F)[F]=0,o(this,I)[I]=0,o(this,W)[W]=0,o(this,C)[C]=0,o(this,G)[G]=0,o(this,H)[H]=0,o(this,J)[J]=0,o(this,K)[K]=0,o(this,L)[L]=0,o(this,U)[U]=0,o(this,$)[$]=0,o(this,tt)[tt]=0,o(this,it)[it]=0,o(this,nt)[nt]=0,o(this,at)[at]=0,o(this,et)[et]=0,this.reset.apply(this,[].slice.call(arguments))}var i=t.prototype;return i.reset=function(){var t=[].slice.call(arguments),i=t[0],n=t[1],a=t[2],e=t[3],r=t[4],s=t[5],h=t[6],o=t[7],u=t[8],c=t[9],y=t[10],f=t[11],l=t[12],w=t[13],x=t[14],d=t[15];return this.a11=Q(i,"a11"),this.a12=Q(n,"a12"),this.a13=Q(a,"a13"),this.a14=Q(e,"a14"),this.a21=Q(r,"a21"),this.a22=Q(s,"a22"),this.a23=Q(h,"a23"),this.a24=Q(o,"a24"),this.a31=Q(u,"a31"),this.a32=Q(c,"a32"),this.a33=Q(y,"a33"),this.a34=Q(f,"a34"),this.a41=Q(l,"a41"),this.a42=Q(w,"a42"),this.a43=Q(x,"a43"),this.a44=Q(d,"a44"),this},i.resetToMat4=function(t){return this.a11=t.a11,this.a12=t.a12,this.a13=t.a13,this.a14=t.a14,this.a21=t.a21,this.a22=t.a22,this.a23=t.a23,this.a24=t.a24,this.a31=t.a31,this.a32=t.a32,this.a33=t.a33,this.a34=t.a34,this.a41=t.a41,this.a42=t.a42,this.a43=t.a43,this.a44=t.a44,this},i.clone=function(){return new t(this.a11,this.a12,this.a13,this.a14,this.a21,this.a22,this.a23,this.a24,this.a31,this.a32,this.a33,this.a34,this.a41,this.a42,this.a43,this.a44)},i.transpose=function(){var t=this.a12,i=this.a13,n=this.a14,a=this.a23,e=this.a24,r=this.a34;return this.a12=this.a21,this.a13=this.a31,this.a14=this.a41,this.a21=t,this.a23=this.a32,this.a24=this.a42,this.a31=i,this.a32=a,this.a34=this.a43,this.a41=n,this.a42=e,this.a43=r,this},i.transposeNew=function(){return this.clone().transpose()},i.add=function(t){return this.a11+=t.a11,this.a12+=t.a12,this.a13+=t.a13,this.a14+=t.a14,this.a21+=t.a21,this.a22+=t.a22,this.a23+=t.a23,this.a24+=t.a24,this.a31+=t.a31,this.a32+=t.a32,this.a33+=t.a33,this.a34+=t.a34,this.a41+=t.a41,this.a42+=t.a42,this.a43+=t.a43,this.a44+=t.a44,this},i.addNew=function(t){return this.clone().add(t)},i.subtract=function(t){return this.a11-=t.a11,this.a12-=t.a12,this.a13-=t.a13,this.a14-=t.a14,this.a21-=t.a21,this.a22-=t.a22,this.a23-=t.a23,this.a24-=t.a24,this.a31-=t.a31,this.a32-=t.a32,this.a33-=t.a33,this.a34-=t.a34,this.a41-=t.a41,this.a42-=t.a42,this.a43-=t.a43,this.a44-=t.a44,this},i.subtractNew=function(t){return this.clone().subtract(t)},i.multiply=function(t){var i=this.clone();return this.a11=t.a11*i.a11+t.a12*i.a21+t.a13*i.a31+t.a14*i.a41,this.a12=t.a11*i.a12+t.a12*i.a22+t.a13*i.a32+t.a14*i.a42,this.a13=t.a11*i.a13+t.a12*i.a23+t.a13*i.a33+t.a14*i.a43,this.a14=t.a11*i.a14+t.a12*i.a24+t.a13*i.a34+t.a14*i.a44,this.a21=t.a21*i.a11+t.a22*i.a21+t.a23*i.a31+t.a24*i.a41,this.a22=t.a21*i.a12+t.a22*i.a22+t.a23*i.a32+t.a24*i.a42,this.a23=t.a21*i.a13+t.a22*i.a23+t.a23*i.a33+t.a24*i.a43,this.a24=t.a21*i.a14+t.a22*i.a24+t.a23*i.a34+t.a24*i.a44,this.a31=t.a31*i.a11+t.a32*i.a21+t.a33*i.a31+t.a34*i.a41,this.a32=t.a31*i.a12+t.a32*i.a22+t.a33*i.a32+t.a34*i.a42,this.a33=t.a31*i.a13+t.a32*i.a23+t.a33*i.a33+t.a34*i.a43,this.a34=t.a31*i.a14+t.a32*i.a24+t.a33*i.a34+t.a34*i.a44,this.a41=t.a41*i.a11+t.a42*i.a21+t.a43*i.a31+t.a44*i.a41,this.a42=t.a41*i.a12+t.a42*i.a22+t.a43*i.a32+t.a44*i.a42,this.a43=t.a41*i.a13+t.a42*i.a23+t.a43*i.a33+t.a44*i.a43,this.a44=t.a41*i.a14+t.a42*i.a24+t.a43*i.a34+t.a44*i.a44,this},i.multiplyNew=function(t){return this.clone().multiply(t)},i.multiplyScalar=function(t){return this.a11*=t,this.a12*=t,this.a13*=t,this.a14*=t,this.a21*=t,this.a22*=t,this.a23*=t,this.a24*=t,this.a31*=t,this.a32*=t,this.a33*=t,this.a34*=t,this.a41*=t,this.a42*=t,this.a43*=t,this.a44*=t,this},i.multiplyScalarNew=function(t){return this.clone().multiplyScalar(t)},i.scale=function(t){return this.multiplyScalar(t)},i.scaleNew=function(t){return this.multiplyScalarNew(t)},i.scaleByVec3=function(t){t.array&&(t=t.array);var i=(t=t.concat([1,1,1]))[0],n=t[1],a=t[2];return this.a11*=i,this.a12*=i,this.a13*=i,this.a14*=i,this.a21*=n,this.a22*=n,this.a23*=n,this.a24*=n,this.a31*=a,this.a32*=a,this.a33*=a,this.a34*=a,this},i.scaleByVec3New=function(t){return this.clone().scaleByVec3(t)},i.transform=function(t){t.array&&(t=t.array);var i=(t=t.concat([0,0,0]))[1],n=t[2];return this.a14+=t[0],this.a24+=i,this.a34+=n,this},i.transformNew=function(t){return this.clone().transform(t)},i.transformTo=function(t){t.array&&(t=t.array);var i=(t=t.concat([0,0,0]))[1],n=t[2];return this.a14=t[0],this.a24=i,this.a34=n,this},i.transformToNew=function(t){return this.clone().transform(t)},i.rotate=function(i,n){if(n.array&&(n=n.array),!n.length||n.length<3)return this;var a=Math.hypot(n[0],n[1],n[2]);if(a<1e-4)return this;var e=n[0]/(a=1/a),r=n[1]/a,s=n[2]/a,h=Math.sin(i),o=Math.cos(i),u=1-o,c=this.clone(),y=new t;return y.a11=e*e*u+o,y.a12=r*e*u+s*h,y.a13=s*e*u-r*h,y.a21=e*r*u-s*h,y.a22=r*r*u+o,y.a23=s*r*u+e*h,y.a31=e*s*u+r*h,y.a32=r*s*u-e*h,y.a33=s*s*u+o,this.a11=c.a11*y.a11+c.a21*y.a12+c.a31*y.a13,this.a12=c.a12*y.a11+c.a22*y.a12+c.a32*y.a13,this.a13=c.a13*y.a11+c.a23*y.a12+c.a33*y.a13,this.a14=c.a14*y.a11+c.a24*y.a12+c.a34*y.a13,this.a21=c.a11*y.a21+c.a21*y.a22+c.a31*y.a23,this.a22=c.a12*y.a21+c.a22*y.a22+c.a32*y.a23,this.a23=c.a13*y.a21+c.a23*y.a22+c.a33*y.a23,this.a24=c.a14*y.a21+c.a24*y.a22+c.a34*y.a23,this.a31=c.a11*y.a31+c.a21*y.a32+c.a31*y.a33,this.a32=c.a12*y.a31+c.a22*y.a32+c.a32*y.a33,this.a33=c.a13*y.a31+c.a23*y.a32+c.a33*y.a33,this.a34=c.a14*y.a31+c.a24*y.a32+c.a34*y.a33,this},i.rotateNew=function(t,i){return this.clone().rotate(t,i)},i.invert=function(){var t=this.clone(),i=this.determinantFunction,n=i.f,a=n.b00,e=n.b01,r=n.b02,s=n.b03,h=n.b04,o=n.b05,u=n.b06,c=n.b07,y=n.b08,f=n.b09,l=n.b10,w=n.b11,x=i.determinant;if(x){var d=1/x;this.a11=(t.a22*w-t.a23*l+t.a24*f)*d,this.a12=(t.a13*l-t.a12*w-t.a14*f)*d,this.a13=(t.a42*o-t.a43*h+t.a44*s)*d,this.a14=(t.a33*h-t.a32*o-t.a34*s)*d,this.a21=(t.a23*y-t.a21*w-t.a24*c)*d,this.a22=(t.a11*w-t.a13*y+t.a14*c)*d,this.a23=(t.a43*r-t.a41*o-t.a44*e)*d,this.a24=(t.a31*o-t.a33*r+t.a34*e)*d,this.a31=(t.a21*l-t.a22*y+t.a24*u)*d,this.a32=(t.a12*y-t.a11*l-t.a14*u)*d,this.a33=(t.a41*h-t.a42*r+t.a44*a)*d,this.a34=(t.a32*r-t.a31*h-t.a34*a)*d,this.a41=(t.a22*c-t.a21*f-t.a23*u)*d,this.a42=(t.a11*f-t.a12*c+t.a13*u)*d,this.a43=(t.a42*e-t.a41*s-t.a43*a)*d,this.a44=(t.a31*s-t.a32*e+t.a33*a)*d}return this},i.invertNew=function(){return this.clone().invert()},i.toString=function(){return"\n      "+this.a11+", "+this.a12+", "+this.a13+", "+this.a14+",\n      "+this.a21+", "+this.a22+", "+this.a23+", "+this.a24+",\n      "+this.a31+", "+this.a32+", "+this.a33+", "+this.a34+",\n      "+this.a41+", "+this.a42+", "+this.a43+", "+this.a44+"\n    "},t.fromRotation=function(i,n){return(new t).rotate(i,n)},t.fromXRotation=function(i){var n=Math.sin(i),a=Math.cos(i);return new t(1,0,0,0,0,a,n,0,0,-n,a,0,0,0,0,1)},t.fromYRotation=function(i){var n=Math.sin(i),a=Math.cos(i);return new t(a,0,-n,0,0,1,0,0,n,0,a,0,0,0,0,1)},t.fromZRotation=function(i){var n=Math.sin(i),a=Math.cos(i);return new t(a,n,0,0,-n,a,0,0,0,0,1,0,0,0,0,1)},t.fromScalingVec3=function(i){if(i.array&&(i=i.array),i instanceof Array)return new t(i[0],0,0,0,0,i[1],0,0,0,0,i[2],0,0,0,0,1)},t.fromTranslatingVec3=function(i){if(i.array&&(i=i.array),i instanceof Array)return new t(1,0,0,0,0,1,0,0,0,0,1,0,i[0],i[1],i[2],1)},t.fromQuat=function(i){if(i.array&&(i=i.array),i instanceof Array&&i.length>=4){var n=i[0],a=i[1],e=i[2],r=i[3],s=i.map(function(t){return 2*t}),h=s[0],o=s[1],u=s[2],c=n*h,y=a*h,f=a*o,l=e*h,w=e*o,x=e*u,d=r*h,p=r*o,b=r*u;return new t(1-f-x,y+b,l-p,0,y-b,1-c-x,w+d,0,l+p,w-d,1-c-f,0,0,0,0,1)}},t.fromRotationTranslationScale=function(i,n,a){if(i.array&&(i=i.array),n.array&&(n=n.array),a.array&&(a=a.array),i.length&&i.length>=4&&n.length&&n.length>=3&&a.length&&a.length>=3){var e=i[0]+i[0],r=i[1]+i[1],s=i[2]+i[2],h=i[0]*e,o=i[0]*r,u=i[0]*s,c=i[1]*r,y=i[1]*s,f=i[2]*s,l=i[3]*e,w=i[3]*r,x=i[3]*s,d=a[0],p=a[1],b=a[2];return new t((1-(c+f))*d,(o+x)*d,(u-w)*d,0,(o-x)*p,(1-(h+f))*p,(y+l)*p,0,(u+w)*b,(y-l)*b,(1-(h+c))*b,0,n[0],n[1],n[2],1)}},t.fromRotationTranslationScaleOrigin=function(i,n,a,e){if(i.array&&(i=i.array),n.array&&(n=n.array),a.array&&(a=a.array),e.array&&(e=e.array),i.length&&i.length>=4&&n.length&&n.length>=3&&a.length&&a.length>=3&&e.length&&e.length>=3){var r=i[0]+i[0],s=i[1]+i[1],h=i[2]+i[2],o=i[0]*r,u=i[0]*s,c=i[0]*h,y=i[1]*s,f=i[1]*h,l=i[2]*h,w=i[3]*r,x=i[3]*s,d=i[3]*h,p=a[0],b=a[1],z=a[2],m=e[0],g=e[1],v=e[2],N=(1-(y+l))*p,M=(u+d)*p,k=(c-x)*p,S=(u-d)*b,T=(1-(o+l))*b,E=(f+w)*b,j=(c+x)*z,O=(f-w)*z,P=(1-(o+y))*z;return new t(N,M,k,0,S,T,E,0,j,O,P,0,n[0]+m-(N*m+S*g+j*v),n[1]+g-(M*m+T*g+O*v),n[2]+v-(k*m+E*g+P*v),1)}},t.frustum=function(i,n,a,e,r,s){var h=1/(n-i),o=1/(e-a),u=1/(r-s);return new t(2*r*h,0,0,0,0,2*r*o,0,0,(n+i)*h,(e+a)*o,(s+r)*u,-1,0,0,s*r*2*u,0)},t.perspective=function(i,n,a,e){var r,s,h,o=1/Math.tan(i/2);return null!=e&&Infinity!==e?(s=(e+a)*(r=1/(a-e)),h=2*e*a*r):(s=-1,h=-2*a),new t(o/n,0,0,0,0,o,0,0,0,0,s,-1,0,0,h,0)},t.ortho=function(i,n,a,e,r,s){var h=1/(i-n),o=1/(a-e),u=1/(r-s);return new t(-2*h,0,0,0,0,-2*o,0,0,0,0,2*u,0,(i+n)*h,(e+a)*o,(s+r)*u,1)},t.lookAt=function(i,n,a){if(i.array&&(i=i.array),n.array&&(n=n.array),a.array&&(a=a.array),i.length&&i.length>=3&&n.length&&n.length>=3&&a.length&&a.length>=3){var e=r(p,i),s=r(p,n),h=r(p,a);if(Math.abs(e.x-s.x)<1e-4&&Math.abs(e.y-s.y)<1e-4&&Math.abs(e.z-s.z)<1e-4)return new t;var o=e.subtractNew(s),u=1/Math.hypot(o.x,o.y,o.z);o.x*=u,o.y*=u,o.z*=u;var c=new p(h.y*o.z-h.z*o.y,h.z*o.x-h.x*o.z,h.x*o.y-h.y*o.x);(u=Math.hypot(c.x,c.y,c.z))?(c.x*=u=1/u,c.y*=u,c.z*=u):c.reset(0,0,0);var y=new p(o.y*c.z-o.z*c.y,o.z*c.x-o.x*c.z,o.x*c.y-o.y*c.x);return(u=Math.hypot(y.x,y.y,y.z))?(y.x*=u=1/u,y.y*=u,y.z*=u):y.reset(0,0,0),new t(c.x,y.x,o.x,0,c.y,y.y,o.y,0,c.z,y.z,o.z,0,-(c.x*e.x+c.y*e.y+c.z*e.z),-(y.x*e.x+y.y*e.y+y.z*e.z),-(o.x*e.x+o.y*e.y+o.z*e.z),1)}},t.targetTo=function(i,n,a){if(i.array&&(i=i.array),n.array&&(n=n.array),a.array&&(a=a.array),i.length&&i.length>=3&&n.length&&n.length>=3&&a.length&&a.length>=3){var e=r(p,i),s=r(p,n),h=r(p,a),o=e.subtractNew(s),u=o.lengthSquared;u>0?(u=1/Math.sqrt(u),o.x*=u,o.y*=u,o.z*=u):o.z=1;var c=new p(h.y*o.z-h.z*o.y,h.z*o.x-h.x*o.z,h.x*o.y-h.y*o.x);return 0===(u=c.lengthSquared)&&(h.z?h.x+=1e-6:h.y?h.z+=1e-6:h.y+=1e-6,c.reset(h.y*o.z-h.z*o.y,h.z*o.x-h.x*o.z,h.x*o.y-h.y*o.x),u=c.lengthSquared),u=1/Math.sqrt(u),c.x*=u,c.y*=u,c.z*=u,new t(c.x,c.y,c.z,0,o.y*c.z-o.z*c.y,o.z*c.x-o.x*c.z,o.x*c.y-o.y*c.x,0,o.x,o.y,o.z,0,e.x,e.y,e.z,1)}},n(t,[{key:"a11",get:function(){return o(this,F)[F]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a11 should be a number");o(this,F)[F]=t}},{key:"a12",get:function(){return o(this,I)[I]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a12 should be a number");o(this,I)[I]=t}},{key:"a13",get:function(){return o(this,W)[W]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a13 should be a number");o(this,W)[W]=t}},{key:"a14",get:function(){return o(this,C)[C]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a14 should be a number");o(this,C)[C]=t}},{key:"a21",get:function(){return o(this,G)[G]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a21 should be a number");o(this,G)[G]=t}},{key:"a22",get:function(){return o(this,H)[H]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a22 should be a number");o(this,H)[H]=t}},{key:"a23",get:function(){return o(this,J)[J]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a23 should be a number");o(this,J)[J]=t}},{key:"a24",get:function(){return o(this,K)[K]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a24 should be a number");o(this,K)[K]=t}},{key:"a31",get:function(){return o(this,L)[L]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a31 should be a number");o(this,L)[L]=t}},{key:"a32",get:function(){return o(this,U)[U]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a32 should be a number");o(this,U)[U]=t}},{key:"a33",get:function(){return o(this,$)[$]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a33 should be a number");o(this,$)[$]=t}},{key:"a34",get:function(){return o(this,tt)[tt]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a34 should be a number");o(this,tt)[tt]=t}},{key:"a41",get:function(){return o(this,it)[it]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a41 should be a number");o(this,it)[it]=t}},{key:"a42",get:function(){return o(this,nt)[nt]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a42 should be a number");o(this,nt)[nt]=t}},{key:"a43",get:function(){return o(this,at)[at]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a43 should be a number");o(this,at)[at]=t}},{key:"a44",get:function(){return o(this,et)[et]||0},set:function(t){if("number"!=typeof t)throw new TypeError("a44 should be a number");o(this,et)[et]=t}},{key:"frobeniusnorm",get:function(){return Math.hypot.apply(Math,this.array)}},{key:"translation",get:function(){return new p(this.a41,this.a42,this.a43)}},{key:"scaling",get:function(){return new p(Math.hypot(this.a11,this.a12,this.a13),Math.hypot(this.a21,this.a22,this.a23),Math.hypot(this.a31,this.a32,this.a33))}},{key:"rotation",get:function(){var t=this.scaling.inverse(),i=this.a11*t.x,n=this.a12*t.y,a=this.a13*t.z,e=this.a21*t.x,r=this.a22*t.y,s=this.a23*t.z,h=this.a31*t.x,o=this.a32*t.y,u=this.a33*t.z,c=i+r+u,y=0;return c>0?(y=2*Math.sqrt(c+1),new R((s-o)/y,(h-a)/y,(n-e)/y,.25*y)):i>r&&i>u?(y=2*Math.sqrt(1+i-r-u),new R(.25*y,(n+e)/y,(h+a)/y,(s-o)/y)):r>u?(y=2*Math.sqrt(1+r-i-u),new R((n+e)/y,.25*y,(s+o)/y,(h-a)/y)):(y=2*Math.sqrt(1+u-i-r),new R((h+a)/y,(s+o)/y,.25*y,(n-e)/y))}},{key:"determinantFunction",get:function(){var t=this.a11*this.a22-this.a12*this.a21,i=this.a11*this.a23-this.a13*this.a21,n=this.a11*this.a24-this.a14*this.a21,a=this.a12*this.a23-this.a13*this.a22,e=this.a12*this.a24-this.a14*this.a22,r=this.a13*this.a24-this.a14*this.a23,s=this.a31*this.a42-this.a32*this.a41,h=this.a31*this.a43-this.a33*this.a41,o=this.a31*this.a44-this.a34*this.a41,u=this.a32*this.a43-this.a33*this.a42,c=this.a32*this.a44-this.a34*this.a42,y=this.a33*this.a44-this.a34*this.a43;return{f:{b00:t,b01:i,b02:n,b03:a,b04:e,b05:r,b06:s,b07:h,b08:o,b09:u,b10:c,b11:y},determinant:t*y-i*c+n*u+a*o-e*h+r*s}}},{key:"determinant",get:function(){return this.determinantFunction.determinant}},{key:"array",get:function(){return[this.a11,this.a12,this.a13,this.a14,this.a21,this.a22,this.a23,this.a24,this.a31,this.a32,this.a33,this.a34,this.a41,this.a42,this.a43,this.a44]}}]),t}();t.Mat2=k,t.Mat3=q,t.Mat4=rt,t.Quat=R,t.Vec2=l,t.Vec3=p,t.Vec4=b});
//# sourceMappingURL=index.umd.js.map
